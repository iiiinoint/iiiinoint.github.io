<!DOCTYPE html>
<html lang="en">
    <!-- title -->


    

<!-- keywords -->



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Noint">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Noint">
    
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="">
    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://noint.top/archives/2023/06/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Noint">
<meta name="twitter:card" content="summary">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/cat.ico">
    
    <title>Noint&#39;s Studio</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link rel="preload" href="/css/style.css?v=20211217" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="/css/dark.css?v=20211217" as="style">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" href="/css/mobile.css?v=20211217" media="(max-width: 960px)">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js?v=20211217" as="script">
    <link rel="preload" href="/scripts/dark.js?v=20211217" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    
    <!-- 百度统计  -->
    
    <!-- Google tag (gtag.js) -->
    

<meta name="generator" content="Hexo 6.3.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
    
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        
            <div class="header-sidebar-menu">
        
            
                <div style="padding-left: 1px;">&#xe775;</div>
            
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href=/>Noint's Studio.</a>
        </span>
    </div>
    <!-- toggle banner for post layout -->
    
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- back to top button -->
    <div class="footer-fixed-element">
        
            <div class="back-top back-top-hidden">
        
        
            <div>&#xe639;</div>
        
        </div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="







">
    
    <!-- 主页  -->
    
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
        </p>
        <!-- 文章页 meta -->
        
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
            <div class="container container-unloaded">
                <main class="main index-page">
    
        
        
        
        
            
            
        
        <article class="index-post">
            <a class="abstract-title" href="/2023/06/07/Computer-composition-Vivado/">
                
                <span class="abstract-title-text">Computer composition_Vivado</span>
            </a>
            <div class="abstract-content">
                <center>
  <font face="黑体" size="100">
    《计算机组成与设计》实验报告
  </font>
  <center><font face="黑体" size="4">
    姓名：杨殿超
  </font>
  <center><font face="黑体" size="4">
    学院：计算机科学与技术学院
  </font>
  <center><font face="黑体" size="4">
    专业：计算机科学与技术
  </font>
  <center><font face="黑体" size="4">
    邮箱：nointiiii@gmail.com
  </font>
</center> 





<center><font face="黑体" size="5">
    报告日期: 4月5日
  </font>
</center> 






<div style="page-break-after: always;"></div>

<h1 id="Lab0"><a href="#Lab0" class="headerlink" title="Lab0 &lt;Vivado 介绍和模块封装&gt;"></a>Lab0 &lt;Vivado 介绍和模块封装&gt;</h1><blockquote>
<p>&lt;3200102318&gt; &lt;杨殿超&gt; <a href="mailto:&#x6e;&#111;&#105;&#110;&#x74;&#x69;&#x69;&#x69;&#105;&#x40;&#103;&#x6d;&#97;&#x69;&#108;&#46;&#x63;&#111;&#x6d;">&#x6e;&#111;&#105;&#110;&#x74;&#x69;&#x69;&#x69;&#105;&#x40;&#103;&#x6d;&#97;&#x69;&#108;&#46;&#x63;&#111;&#x6d;</a></p>
</blockquote>
<h2 id="操作方法与实验步骤"><a href="#操作方法与实验步骤" class="headerlink" title="操作方法与实验步骤"></a>操作方法与实验步骤</h2><h3 id="一：VIVADO-工具学习"><a href="#一：VIVADO-工具学习" class="headerlink" title="一：VIVADO 工具学习"></a>一：VIVADO 工具学习</h3><p>任务：利用 VIVADO 完成 water_LED 的全流程设计新建工程 Water_LED，选 择 芯 片 为 xc7k160tffg676-2L 。 添加源文件 Water_LED.v.</p>
<p>通过一个计数器 (C0) 控制 LED 灯的移位速度，当计数器到达预设值时，将 LED 灯循环左移。设计方案如下：</p>
<ol>
<li>使用 4 位寄存器 LED_o 表示 4 个 LED 灯的状态。</li>
<li>使用 32 位寄存器 C0 作为计数器。</li>
<li>时钟上升沿触发计数和 LED 灯的状态更新。</li>
<li>当复位信号 RSTn_i 为低电平时，将 LED_o 初始化为 ‘4b1’，将计数器 C0 清零。</li>
<li>在正常工作状态下，计数器 C0 每个时钟周期加 1。</li>
<li>当计数器 C0 达到预设值 100,000,000 时，将 LED_o 左移一位。如果 LED_o 达到 ‘4b1000’，则重新设置为 ‘4b1’。并将计数器 C0 清零。</li>
<li>如果计数器 C0 未达到预设值，LED_o 保持不变。</li>
</ol>
<p>预计结果是，LED 灯会以预设的速度循环左移，呈现出水灯效果。</p>
<p>代码如下</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> Water_LED(</span><br><span class="line">    <span class="keyword">input</span> CLK_i,     <span class="comment">// 输入时钟信号</span></span><br><span class="line">    <span class="keyword">input</span> RSTn_i,    <span class="comment">// 低有效复位信号</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>]LED_o <span class="comment">// 输出，表示四个LED灯的状态</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>]C0; <span class="comment">// 32位计数器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 时钟上升沿触发的过程</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> CLK_i) </span><br><span class="line">    <span class="keyword">if</span>(!RSTn_i) <span class="keyword">begin</span></span><br><span class="line">        <span class="comment">// 当复位信号为低时，初始化LED灯状态和计数器值</span></span><br><span class="line">        LED_o &lt;= <span class="number">4&#x27;b1</span>;</span><br><span class="line">        C0 &lt;= <span class="number">32&#x27;h0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(C0 == <span class="number">32&#x27;d100_000_000</span>) <span class="keyword">begin</span></span><br><span class="line">            <span class="comment">// 当计数器值达到预设值时，LED灯左移，并清零计数器</span></span><br><span class="line">            C0 &lt;= <span class="number">32&#x27;h0</span>;</span><br><span class="line">            <span class="keyword">if</span>(LED_o == <span class="number">4&#x27;b1000</span>)</span><br><span class="line">                LED_o &lt;= <span class="number">4&#x27;b1</span>;</span><br><span class="line">            <span class="keyword">else</span> LED_o &lt;= LED_o &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span>  <span class="keyword">begin</span> </span><br><span class="line">            <span class="comment">// 计数器递增</span></span><br><span class="line">            C0 &lt;= C0 + <span class="number">1&#x27;b1</span>; </span><br><span class="line">            <span class="comment">// 保持LED灯状态不变</span></span><br><span class="line">            LED_o &lt;= LED_o; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411020305578.png" alt="image-20230411020305578">编写仿真代码：</p>
<p>提供时钟信号和复位信号，并观察输出 LED 灯状态的变化。设计方案如下：</p>
<ol>
<li>创建测试模块 Water_LED_tb。</li>
<li>定义输入信号 CLK_i 和 RSTn_i，以及输出信号 LED_o。</li>
<li>实例化 Water_LED 模块，并将输入输出信号连接到实例。</li>
<li>生成一个周期为 10 时间单位的时钟信号。</li>
<li>在仿真开始时，将 CLK_i 设置为 0，RSTn_i 设置为 0。</li>
<li>100 时间单位后，将 RSTn_i 设置为 1，模块开始正常工作。</li>
</ol>
<p>预计结果是，观察到 Water_LED 模块中的 LED 灯在 RSTn_i 变为高电平后，开始呈现水灯效果。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> Water_LED_tb;</span><br><span class="line">    <span class="keyword">reg</span> CLK_i;       <span class="comment">// 输入时钟信号</span></span><br><span class="line">    <span class="keyword">reg</span> RSTn_i;      <span class="comment">// 低有效复位信号</span></span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>]LED_o; <span class="comment">// 输出，表示四个LED灯的状态</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实例化 Water_LED 模块并连接信号</span></span><br><span class="line">    Water_LED Water_LED_U(</span><br><span class="line">        <span class="variable">.CLK_i</span>(CLK_i),</span><br><span class="line">        <span class="variable">.RSTn_i</span>(RSTn_i),</span><br><span class="line">        <span class="variable">.LED_o</span>(LED_o)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成周期为10时间单位的时钟信号</span></span><br><span class="line">    <span class="keyword">always</span> #<span class="number">5</span> CLK_i = ~CLK_i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="comment">// 初始化时钟和复位信号</span></span><br><span class="line">        CLK_i = <span class="number">0</span>;</span><br><span class="line">        RSTn_i = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">100</span> RSTn_i = <span class="number">1</span>; <span class="comment">// 100时间单位后，将复位信号设为高，模块开始正常工作</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411020337002.png" alt="image-20230411020337002"></p>
<p>模拟波形如下：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411021150341.png" alt="image-20230411021150341"></p>
<p>新建引脚约束文件 Water_LED.xdc，代码如下：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#系统时钟</span><br><span class="line">set_property IOSTANDARD LVCMOS18  [get_ports  CLK_i]</span><br><span class="line">set_property PACKAGE_PIN AC18     [get_ports  CLK_i]</span><br><span class="line">#系统复位</span><br><span class="line">set_property IOSTANDARD LVCMOS18  [get_ports  RSTn_i]</span><br><span class="line">set_property PACKAGE_PIN W13      [get_ports  RSTn_i]</span><br><span class="line">#LED并行接口</span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">0</span>]&#125;]</span><br><span class="line">set_property PACKAGE_PIN W23     [get_ports &#123;LED_o[<span class="number">0</span>]&#125;]</span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">1</span>]&#125;]</span><br><span class="line">set_property PACKAGE_PIN AB26    [get_ports &#123;LED_o[<span class="number">1</span>]&#125;]</span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">2</span>]&#125;]</span><br><span class="line">set_property PACKAGE_PIN Y25     [get_ports &#123;LED_o[<span class="number">2</span>]&#125;]</span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">3</span>]&#125;]</span><br><span class="line">set_property PACKAGE_PIN AA23    [get_ports &#123;LED_o[<span class="number">3</span>]&#125;]</span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">4</span>]&#125;] 			</span><br><span class="line">set_property PACKAGE_PIN Y23     [get_ports &#123;LED_o[<span class="number">4</span>]&#125;]  </span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">5</span>]&#125;] 			</span><br><span class="line">set_property PACKAGE_PIN Y22     [get_ports &#123;LED_o[<span class="number">5</span>]&#125;]  </span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">6</span>]&#125;] 			</span><br><span class="line">set_property PACKAGE_PIN AE21    [get_ports &#123;LED_o[<span class="number">6</span>]&#125;]  </span><br><span class="line">set_property IOSTANDARD LVCMOS33 [get_ports &#123;LED_o[<span class="number">7</span>]&#125;] 			</span><br><span class="line">set_property PACKAGE_PIN AF24    [get_ports &#123;LED_o[<span class="number">7</span>]&#125;] </span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411020408936.png" alt="image-20230411020408936"></p>
<p>导入后文件结构如图</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411020012289.png" alt="image-20230411020012289">、</p>
<h3 id="二：自定义模块设计学习"><a href="#二：自定义模块设计学习" class="headerlink" title="二：自定义模块设计学习"></a>二：<strong>自定义模块设计学习</strong></h3><p>任务：利用 VIVADO 完成多选器（MUX） 和逻辑部件（LOGIC）的设计和封装,以 MUX2T1_5 为例</p>
<p>这是一个简单的2输入1输出5位宽度的多路复用器（MUX）模块。其设计思路是根据选择信号s的值来选择两个输入信号I0和I1中的一个作为输出信号o。</p>
<p>设计方案：</p>
<ul>
<li>输入信号：I0和I1，宽度为5位（[4:0]）；</li>
<li>选择信号：s，宽度为1位；</li>
<li>输出信号：o，宽度为5位（[4:0]）。</li>
</ul>
<p>预计结果： 根据选择信号s的值，多路复用器模块将从输入信号I0和I1中选择一个作为输出信号o：</p>
<ul>
<li>当s为0时，输出信号o将等于输入信号I0；</li>
<li>当s为1时，输出信号o将等于输入信号I1。</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> MUX2T1_5(</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>] I0, <span class="comment">// 5位输入信号I0</span></span><br><span class="line">    <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>] I1, <span class="comment">// 5位输入信号I1</span></span><br><span class="line">    <span class="keyword">input</span> s,       <span class="comment">// 选择信号s</span></span><br><span class="line">    <span class="keyword">output</span> [<span class="number">4</span>:<span class="number">0</span>] o <span class="comment">// 5位输出信号o</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据选择信号s的值，将I1或I0分配给输出信号o</span></span><br><span class="line">    <span class="comment">// 当s为0时，o = I0</span></span><br><span class="line">    <span class="comment">// 当s为1时，o = I1</span></span><br><span class="line">    <span class="keyword">assign</span> o = s ? I1 : I0;</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>编写仿真代码：</p>
<p>设计方案：</p>
<ol>
<li>实例化MUX2T1_5模块；</li>
<li>在initial语句块中，改变输入信号I0、I1和选择信号s的值。</li>
</ol>
<p>预计结果：</p>
<ul>
<li>当选择信号s为0时，输出信号o应等于输入信号I0；</li>
<li>当选择信号s为1时，输出信号o应等于输入信号I1。</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> MUX2T1_5_TB;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">4</span>:<span class="number">0</span>] I0; <span class="comment">// 5位输入信号I0</span></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">4</span>:<span class="number">0</span>] I1; <span class="comment">// 5位输入信号I1</span></span><br><span class="line">    <span class="keyword">reg</span> s;       <span class="comment">// 选择信号s</span></span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>] o; <span class="comment">// 5位输出信号o</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 实例化MUX2T1_5模块</span></span><br><span class="line">    MUX2T1_5 MUX2T1_5_U(</span><br><span class="line">        <span class="variable">.I0</span>(I0),</span><br><span class="line">        <span class="variable">.I1</span>(I1),</span><br><span class="line">        <span class="variable">.s</span>(s),</span><br><span class="line">        <span class="variable">.o</span>(o)</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        s = <span class="number">0</span>; <span class="comment">// 设置选择信号s为0</span></span><br><span class="line">        I0 = <span class="number">0</span>; <span class="comment">// 设置输入信号I0的值</span></span><br><span class="line">        I1 = <span class="number">1</span>; <span class="comment">// 设置输入信号I1的值</span></span><br><span class="line">        #<span class="number">50</span> s = <span class="number">1</span>; <span class="comment">// 50时间单位后，设置选择信号s为1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411022132714.png" alt="image-20230411022132714"></p>
<p>之后进行封装。点击任务栏 Tools-&gt;Create and package new IP，之后一直选择Next，直到跳出 Package IP 界面，选择 Review and Package-&gt;Package IP，封装成功。</p>
<p>有源文件封装：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411022521985.png" alt="image-20230411022521985"></p>
<p>无源文件封装：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411022646877.png" alt="image-20230411022646877"></p>
<h3 id="三：基本逻辑模块的原理学习、Xilinx-IP-生成"><a href="#三：基本逻辑模块的原理学习、Xilinx-IP-生成" class="headerlink" title="三：基本逻辑模块的原理学习、Xilinx IP 生成"></a>三：<strong>基本逻辑模块的原理学习、Xilinx IP 生成</strong></h3><p>我们这里对一个算数逻辑单元进行仿真验证，提供使用的仿真代码与波形</p>
<p>我们这里使用add_32来验证：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> add_32(</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] A,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] B,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] result</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assign</span> result = A + B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>仿真代码如下：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> add_32_tb;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] A;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] B;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] result;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实例化add_32模块</span></span><br><span class="line">    add_32 add_32_(</span><br><span class="line">        <span class="variable">.A</span>(A),</span><br><span class="line">        <span class="variable">.B</span>(B),</span><br><span class="line">        <span class="variable">.result</span>(result)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        A = <span class="number">32&#x27;d123</span>;</span><br><span class="line">        B = <span class="number">32&#x27;d321</span>;</span><br><span class="line">        #<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        A = <span class="number">32&#x27;hFFFFFFFF</span>;</span><br><span class="line">        B = <span class="number">32&#x27;h00000001</span>;</span><br><span class="line">        #<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        A = <span class="number">32&#x27;hFFFFFFFF</span>;</span><br><span class="line">        B = <span class="number">32&#x27;d9</span>;</span><br><span class="line">        #<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">$finish</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>波形如图：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411023910217.png" alt="image-20230411023910217"></p>
<p>在 VIVADO 环境中建立 OExp01-Element 工程并完成基本模块调用。</p>
<p>新建工程 0Exp00-Element，选择芯片。添加 IP，选择 Settings-&gt;IP-&gt;Repository，按路径添加之前写的 mux 和 logic模块。点击 IP INTEGRATER-&gt;Create Block Design，创建 0Exp00_Element.bd，通过点击“+”添加之前封装的 IP，结果如下：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411023149353.png" alt="image-20230411023149353"></p>
<h3 id="四：学习利用-VIVADO-生成-Xilinx-库中的-IP"><a href="#四：学习利用-VIVADO-生成-Xilinx-库中的-IP" class="headerlink" title="四：学习利用 VIVADO 生成 Xilinx 库中的 IP"></a>四：<strong>学习利用 VIVADO 生成 Xilinx 库中的 IP</strong></h3><p>了解实验板的资源情况，熟悉Block Design的设计流程，完成实验平台muxctrl的构建</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> OExp01_muxctrl</span><br><span class="line">   (I0,</span><br><span class="line">    I1,</span><br><span class="line">    o_0,</span><br><span class="line">    s,</span><br><span class="line">    s1,</span><br><span class="line">    s2);</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>]I0;</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>]I1;</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">4</span>:<span class="number">0</span>]o_0;</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>]s;</span><br><span class="line">  <span class="keyword">input</span> s1;</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">2</span>:<span class="number">0</span>]s2;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]I0_0_1;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]I1_0_1;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]MUX2T1_5_0_o;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]MUX2T1_5_1_o;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]MUX4T1_5_0_o;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>]MUX8T1_8_0_o;</span><br><span class="line">  <span class="keyword">wire</span> s_0_1;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>]s_0_2;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>]s_0_3;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>]xlconcat_0_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>]xlconcat_1_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]xlconstant_0_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]xlconstant_1_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>]xlconstant_2_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">0</span>:<span class="number">0</span>]xlconstant_3_dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>]xlslice_0_Dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>]xlslice_1_Dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]xlslice_2_Dout;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">4</span>:<span class="number">0</span>]xlslice_3_Dout;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assign</span> I0_0_1 = I0[<span class="number">4</span>:<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">assign</span> I1_0_1 = I1[<span class="number">4</span>:<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">assign</span> o_0[<span class="number">4</span>:<span class="number">0</span>] = MUX4T1_5_0_o;</span><br><span class="line">  <span class="keyword">assign</span> s_0_1 = s1;</span><br><span class="line">  <span class="keyword">assign</span> s_0_2 = s2[<span class="number">2</span>:<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">assign</span> s_0_3 = s[<span class="number">1</span>:<span class="number">0</span>];</span><br><span class="line">  OExp01_muxctrl_MUX2T1_5_0_0 MUX2T1_5_0</span><br><span class="line">       (<span class="variable">.I0</span>(I0_0_1),</span><br><span class="line">        <span class="variable">.I1</span>(I1_0_1),</span><br><span class="line">        <span class="variable">.o</span>(MUX2T1_5_0_o),</span><br><span class="line">        <span class="variable">.s</span>(s_0_1));</span><br><span class="line">  OExp01_muxctrl_MUX2T1_5_1_1 MUX2T1_5_1</span><br><span class="line">       (<span class="variable">.I0</span>(I0_0_1),</span><br><span class="line">        <span class="variable">.I1</span>(I1_0_1),</span><br><span class="line">        <span class="variable">.o</span>(MUX2T1_5_1_o),</span><br><span class="line">        <span class="variable">.s</span>(xlconstant_3_dout));</span><br><span class="line">  OExp01_muxctrl_MUX4T1_5_0_0 MUX4T1_5_0</span><br><span class="line">       (<span class="variable">.I0</span>(xlslice_2_Dout),</span><br><span class="line">        <span class="variable">.I1</span>(xlslice_3_Dout),</span><br><span class="line">        <span class="variable">.I2</span>(xlconstant_1_dout),</span><br><span class="line">        <span class="variable">.I3</span>(xlconstant_0_dout),</span><br><span class="line">        <span class="variable">.o</span>(MUX4T1_5_0_o),</span><br><span class="line">        <span class="variable">.s</span>(s_0_3));</span><br><span class="line">  OExp01_muxctrl_MUX8T1_8_0_0 MUX8T1_8_0</span><br><span class="line">       (<span class="variable">.I0</span>(xlconcat_0_dout),</span><br><span class="line">        <span class="variable">.I1</span>(xlconcat_1_dout),</span><br><span class="line">        <span class="variable">.I2</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.I3</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.I4</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.I5</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.I6</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.I7</span>(xlconstant_2_dout),</span><br><span class="line">        <span class="variable">.o</span>(MUX8T1_8_0_o),</span><br><span class="line">        <span class="variable">.s</span>(s_0_2));</span><br><span class="line">  OExp01_muxctrl_xlconcat_0_0 xlconcat_0</span><br><span class="line">       (<span class="variable">.In0</span>(xlslice_0_Dout),</span><br><span class="line">        <span class="variable">.In1</span>(xlslice_1_Dout),</span><br><span class="line">        <span class="variable">.dout</span>(xlconcat_0_dout));</span><br><span class="line">  OExp01_muxctrl_xlconcat_1_0 xlconcat_1</span><br><span class="line">       (<span class="variable">.In0</span>(xlslice_1_Dout),</span><br><span class="line">        <span class="variable">.In1</span>(xlslice_0_Dout),</span><br><span class="line">        <span class="variable">.dout</span>(xlconcat_1_dout));</span><br><span class="line">  OExp01_muxctrl_xlconstant_0_1 xlconstant_0</span><br><span class="line">       (<span class="variable">.dout</span>(xlconstant_0_dout));</span><br><span class="line">  OExp01_muxctrl_xlconstant_1_0 xlconstant_1</span><br><span class="line">       (<span class="variable">.dout</span>(xlconstant_1_dout));</span><br><span class="line">  OExp01_muxctrl_xlconstant_2_0 xlconstant_2</span><br><span class="line">       (<span class="variable">.dout</span>(xlconstant_2_dout));</span><br><span class="line">  OExp01_muxctrl_xlconstant_0_0 xlconstant_3</span><br><span class="line">       (<span class="variable">.dout</span>(xlconstant_3_dout));</span><br><span class="line">  OExp01_muxctrl_xlslice_0_0 xlslice_0</span><br><span class="line">       (<span class="variable">.Din</span>(MUX2T1_5_1_o),</span><br><span class="line">        <span class="variable">.Dout</span>(xlslice_0_Dout));</span><br><span class="line">  OExp01_muxctrl_xlslice_1_0 xlslice_1</span><br><span class="line">       (<span class="variable">.Din</span>(MUX2T1_5_0_o),</span><br><span class="line">        <span class="variable">.Dout</span>(xlslice_1_Dout));</span><br><span class="line">  OExp01_muxctrl_xlslice_2_0 xlslice_2</span><br><span class="line">       (<span class="variable">.Din</span>(MUX8T1_8_0_o),</span><br><span class="line">        <span class="variable">.Dout</span>(xlslice_2_Dout));</span><br><span class="line">  OExp01_muxctrl_xlslice_3_0 xlslice_3</span><br><span class="line">       (<span class="variable">.Din</span>(xlconcat_1_dout),</span><br><span class="line">        <span class="variable">.Dout</span>(xlslice_3_Dout));</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>



<h2 id="实验结果与分析"><a href="#实验结果与分析" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h2><h3 id="一：VIVADO-工具学习-1"><a href="#一：VIVADO-工具学习-1" class="headerlink" title="一：VIVADO 工具学习"></a>一：VIVADO 工具学习</h3><p>LED 灯以预设的速度循环移动，呈现出水灯效果，reset正常工作，符合要求。</p>
<table>
<thead>
<tr>
<th><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025155698.png" alt="image-20230411025155698"></th>
<th><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025159532.png" alt="image-20230411025159532"></th>
<th><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025204189.png" alt="image-20230411025204189"></th>
<th><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025208364.png" alt="image-20230411025208364"></th>
</tr>
</thead>
</table>
<h3 id="二：自定义模块设计学习-1"><a href="#二：自定义模块设计学习-1" class="headerlink" title="二：自定义模块设计学习"></a>二：<strong>自定义模块设计学习</strong></h3><p>MUX2T1_5仿真波形如下：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411022132714.png" alt="image-20230411022132714"></p>
<ul>
<li>当选择信号s为0时，输出信号o应等于输入信号I0；</li>
<li>当选择信号s为1时，输出信号o应等于输入信号I1。</li>
</ul>
<p>符合预期，两种封装方式也符合预期，在过程中可以看到截图。</p>
<h3 id="三：基本逻辑模块的原理学习、Xilinx-IP-生成-1"><a href="#三：基本逻辑模块的原理学习、Xilinx-IP-生成-1" class="headerlink" title="三：基本逻辑模块的原理学习、Xilinx IP 生成"></a>三：<strong>基本逻辑模块的原理学习、Xilinx IP 生成</strong></h3><p>算数单元验证add_32</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411023910217.png" alt="image-20230411023910217"><br>$$<br>123+321&#x3D;444<br>\<br>-1+1&#x3D;1<br>\<br>-1+9&#x3D;8<br>$$<br>符合预期。同时OExp01-Element 工程完成基本模块调用</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411023149353.png" alt="image-20230411023149353"></p>
<h3 id="四：学习利用-VIVADO-生成-Xilinx-库中的-IP-1"><a href="#四：学习利用-VIVADO-生成-Xilinx-库中的-IP-1" class="headerlink" title="四：学习利用 VIVADO 生成 Xilinx 库中的 IP"></a>四：<strong>学习利用 VIVADO 生成 Xilinx 库中的 IP</strong></h3><p>muxctrl 上板:</p>
<table>
<thead>
<tr>
<th>s&#x3D;2’b00,s1&#x3D;1’b0,s2&#x3D;3’b000,I1[0]&#x3D;1’b1, I0[3:0]&#x3D;4’b1111，灯全亮</th>
<th>s&#x3D;2’b00,s1&#x3D;1’b0,s2&#x3D;3’b001，I0[0]&#x3D;1’b1,I1[3:0]&#x3D;4’b1111时，仅o_0[0],o_0[4]亮</th>
<th>s&#x3D;2’b00,s1&#x3D;1’b0,s2&#x3D;3’b010，I0[0]&#x3D;1’b1,I1[3:0]&#x3D;4’b1111时，仅o_0[0]亮</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025441769.png" alt="image-20230411025441769"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025536511.png" alt="image-20230411025536511"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025802918.png" alt="image-20230411025802918"></td>
<td></td>
</tr>
<tr>
<td><strong>s1&#x3D;1’b1，无论s2&#x3D;3’b000或3’b001，只要I1[3:0]&#x3D;4’b1111，灯都全亮</strong></td>
<td><strong>s&#x3D;2’b11时，所有灯都暗</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025918388.png" alt="image-20230411025918388"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411025952553.png" alt="image-20230411025952553"></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>符合预期</p>
<h2 id="讨论、心得"><a href="#讨论、心得" class="headerlink" title="讨论、心得"></a>讨论、心得</h2><p>本次实验我学习设计流水灯，封装并尝试调用逻辑模块和选择器模块，设计 muxctrl，熟悉了 vivado 的一</p>
<p>些基本操作，封装的逻辑模块和选择器模块也会在之后的实验中派上用处。</p>
<h3 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h3><p>助教在做《计算机体系结构》实验时，在 <code>Message Window</code> 中看到了下列错误提示：</p>
<blockquote>
<p>[Drc 23-20] Rule violation (NSTD-1) Unspecified I&#x2F;O Standard: 41 out of 41 logical ports use I&#x2F;O standard (IOSTANDARD) value ‘DEFAULT’, instead of a user assigned specific value. This may cause I&#x2F;O contention or incompatibility with the board power or connectivity affecting performance, signal integrity or in extreme cases cause damage to the device or the components to which it is connected. To correct this violation, specify all I&#x2F;O standards. This design will fail to generate a bitstream unless all logical ports have a user specified I&#x2F;O standard value defined. To allow bitstream creation with unspecified I&#x2F;O standard values (not recommended), use this command: set_property SEVERITY {Warning} [get_drc_checks NSTD-1]. NOTE: When using the Vivado Runs infrastructure (e.g. launch_runs Tcl command), add this command to a .tcl file and add that file as a pre-hook for write_bitstream step for the implementation run. Problem ports: BTN_X[4:0], BTN_Y[3], BTN_Y[0], SW[15], SW[14], SW[13], SW[7], SW[6], SW[5], SW[4], SW[3], SW[2], SW[1], SW[0], VGA_B[3:0]… and (the first 15 of 28 listed).</p>
</blockquote>
<p>请你帮助可怜的助教解决这个问题😭，完成实验！</p>
<ul>
<li>你需要说明：<ul>
<li>这个 Error 是出在哪个阶段 (Synthesis&#x2F;Implementation&#x2F;Generate Bitstream) ？</li>
<li>助教应该怎么做？（请至少给出一种可能的解决方式）</li>
<li>你是通过什么途径了解与解决这个 Error 的？（简单说明即可，参考内容请给出链接）</li>
</ul>
</li>
<li>你不需要理解与说明：<ul>
<li>这个错误到底是什么东西，这个错误是怎么产生的。</li>
</ul>
</li>
<li>你可能通过以下途径完成本题：<ul>
<li>认真阅读<strong>报错信息</strong>，说不定解决方案就在 Error 中了？</li>
<li>使用搜索引擎（最好不要用 Baidu ），粘贴报错的<strong>头部</strong>，看看能不能借鉴前人的智慧。</li>
<li>善用<a target="_blank" rel="noopener" href="https://support.xilinx.com/"> Xilinx Support</a>。</li>
</ul>
</li>
</ul>
<p>感谢你帮助助教完成了实验😊！之后的实验中，如果你发现了各种报错（尤其是 Critical Warnings&#x2F;Errors）也可以先尝试通过今天的途径解决。</p>
<hr>
<p>这个错误是在 Generate Bitstream 阶段出现的。错误提示表明，在设计中，41个逻辑端口的 I&#x2F;O 标准（IOSTANDARD）使用了默认值 ‘DEFAULT’，而不是用户指定的特定值。这可能导致 I&#x2F;O 冲突或与板卡电源或连接不兼容，影响性能、信号完整性，或在极端情况下导致设备或与其连接的组件损坏。要解决这个问题，需要指定所有 I&#x2F;O 标准。</p>
<p>解决方法：</p>
<ol>
<li><p>在 XDC 约束文件中，为每个逻辑端口指定正确的 I&#x2F;O 标准（IOSTANDARD）。例如，对于一个名为 “SW[0]” 的端口，可以添加以下约束：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cssCopy <span class="selector-tag">code</span></span><br><span class="line">set_property IOSTANDARD LVCMOS33 <span class="selector-attr">[get_ports SW[0]</span>]</span><br></pre></td></tr></table></figure>

<p>请根据设计中使用的 FPGA 芯片和开发板，为每个端口选择合适的 I&#x2F;O 标准。</p>
</li>
<li><p>如果允许使用默认的 I&#x2F;O 标准，可以使用以下命令来降低错误的严重性，从而允许生成比特流文件：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cssCopy <span class="selector-tag">code</span></span><br><span class="line">set_property SEVERITY &#123;Warning&#125; <span class="selector-attr">[get_drc_checks NSTD-1]</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>了解途径：</p>
<p>这个错误是 Vivado 生成的一条 DRC（Design Rule Check，设计规则检查）错误信息。可以从错误提示中获取详细信息，并通过搜索 Xilinx 官方文档中的 “Vivado Design Suite User Guide: I&#x2F;O and Clock Planning (UG899)”。</p>
<p>参考链接：</p>
<p>Vivado Design Suite User Guide: I&#x2F;O and Clock Planning (UG899)：<a target="_blank" rel="noopener" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug899-vivado-io-clock-planning.pdf">https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug899-vivado-io-clock-planning.pdf</a></p>
<h1 id="Lab1"><a href="#Lab1" class="headerlink" title="Lab1 &lt;ALU、Regfile 设计和有限状态机&gt;"></a>Lab1 &lt;ALU、Regfile 设计和有限状态机&gt;</h1><blockquote>
<p>&lt;3200102318&gt; &lt;杨殿超&gt; <a href="mailto:&#110;&#x6f;&#x69;&#x6e;&#x74;&#x69;&#105;&#105;&#x69;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#x6d;">&#110;&#x6f;&#x69;&#x6e;&#x74;&#x69;&#105;&#105;&#x69;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#x6d;</a></p>
</blockquote>
<h2 id="操作方法与实验步骤-1"><a href="#操作方法与实验步骤-1" class="headerlink" title="操作方法与实验步骤"></a>操作方法与实验步骤</h2><h3 id="一：设计实现数据通路部件-ALU"><a href="#一：设计实现数据通路部件-ALU" class="headerlink" title="一：设计实现数据通路部件 ALU"></a>一：设计实现数据通路部件 ALU</h3><p>实现ALU（算术逻辑单元），执行给定的操作（通过ALU_operation输入）在两个32位的输入值A和B之间进行计算，并将结果输出到res端口。另外，zero输出端口表示结果是否为零。</p>
<p>实现以下操作：</p>
<ul>
<li>XOR</li>
<li>ADD（带进位）</li>
<li>AND</li>
<li>OR</li>
<li>XOR</li>
<li>NOR</li>
<li>SRL（逻辑右移）</li>
<li>M8_1（多路选择器）</li>
</ul>
<p>在设计方案中，要使用一些中间变量，例如XLXN_1，XLXN_2等，它们用于将ALU_operation输入转换为适当的控制信号以选择要执行的操作。通过这些中间变量，将ALU_operation输入的操作转换为具体的逻辑门电路，从而实现了ALU的功能。</p>
<p>U1模块中的SignalExt_32_0用于从ALU_operation的第3个位中提取一个控制信号，并将其扩展为32位信号。</p>
<p>每个操作都使用单独的模块来实现。</p>
<p>XOR操作使用xor_32_0模块实现，ADD操作使用addc_32_0模块实现，将这些模块连接在一起，并通过中间变量进行通信。最终结果通过M8_1模块进行多路选择，选择正确的结果输出。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> ALU(</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] A,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] B,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">2</span>:<span class="number">0</span>] ALU_operation,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] res,</span><br><span class="line">    <span class="keyword">output</span> zero</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">wire</span> XLXN_1 = ALU_operation[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_2;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_3;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">32</span>:<span class="number">0</span>] XLXN_4;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_5 = &#123;<span class="number">31&#x27;b0</span>, XLXN_4[<span class="number">32</span>]&#125;;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_6;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_7;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_8;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_9;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] XLXN_10;</span><br><span class="line"></span><br><span class="line">SignalExt_32_0 U1(</span><br><span class="line">    <span class="variable">.S</span>(XLXN_1),</span><br><span class="line">    <span class="variable">.So</span>(XLXN_2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">xor_32_0 U2(</span><br><span class="line">    <span class="variable">.A</span>(XLXN_2),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_3)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">addc_32_0 U3(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(XLXN_3),</span><br><span class="line">    <span class="variable">.C0</span>(XLXN_1),</span><br><span class="line">    <span class="variable">.S</span>(XLXN_4)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">and_32_0 U4(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_6)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">or_32_0 U5(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_7)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">xor_32_0 U6(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_8)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">nor_32_0 U7(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_9)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">srl32_0 U8(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.res</span>(XLXN_10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">M8_1_32_0 U9(</span><br><span class="line">    <span class="variable">.s</span>(ALU_operation),</span><br><span class="line">    <span class="variable">.I0</span>(XLXN_6),</span><br><span class="line">    <span class="variable">.I1</span>(XLXN_7),</span><br><span class="line">    <span class="variable">.I2</span>(XLXN_4[<span class="number">31</span>:<span class="number">0</span>]),</span><br><span class="line">    <span class="variable">.I3</span>(XLXN_8),</span><br><span class="line">    <span class="variable">.I4</span>(XLXN_9),</span><br><span class="line">    <span class="variable">.I5</span>(XLXN_10),</span><br><span class="line">    <span class="variable">.I6</span>(XLXN_4[<span class="number">31</span>:<span class="number">0</span>]),</span><br><span class="line">    <span class="variable">.I7</span>(XLXN_5),</span><br><span class="line">    <span class="variable">.o</span>(res)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">or_bit_32_0 U10(</span><br><span class="line">    <span class="variable">.A</span>(res),</span><br><span class="line">    <span class="variable">.o</span>(zero)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="二：设计实现数据通路部件-Register-Files"><a href="#二：设计实现数据通路部件-Register-Files" class="headerlink" title="二：设计实现数据通路部件 Register Files"></a>二：设计实现数据通路部件 Register Files</h3><p>要实现一个寄存器文件模块，其中包括以下输入和输出：</p>
<ul>
<li>输入：时钟信号<code>clk</code>、复位信号<code>rst</code>、寄存器写使能信号<code>RegWrite</code>、读取寄存器1的地址<code>Rs1_addr</code>、读取寄存器2的地址<code>Rs2_addr</code>、写入寄存器的地址<code>Wt_addr</code>、写入寄存器的数据<code>Wt_data</code>。</li>
<li>输出：从寄存器1读取的数据<code>Rs1_data</code>、从寄存器2读取的数据<code>Rs2_data</code>以及从寄存器0到寄存器31的所有数据。</li>
</ul>
<p>该寄存器文件模块主要功能是读取和写入数据到寄存器中。时钟信号<code>clk</code>作为模块输入，控制时序。当复位信号<code>rst</code>为高电平时，寄存器的值被全部初始化为0。当寄存器写使能信号<code>RegWrite</code>为高电平且写入地址<code>Wt_addr</code>不等于0时，寄存器的值被写入新的数据<code>Wt_data</code>。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> regs(</span><br><span class="line">    <span class="keyword">input</span> clk, rst, RegWrite,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">4</span>:<span class="number">0</span>] Rs1_addr, Rs2_addr, Wt_addr,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] Wt_data,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] Rs1_data, Rs2_data,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] Reg00, Reg01, Reg02, Reg03, Reg04, Reg05, Reg06, Reg07, Reg08, Reg09,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] Reg10, Reg11, Reg12, Reg13, Reg14, Reg15, Reg16, Reg17, Reg18, Reg19,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] Reg20, Reg21, Reg22, Reg23, Reg24, Reg25, Reg26, Reg27, Reg28, Reg29,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] Reg30, Reg31</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] register [<span class="number">1</span>:<span class="number">31</span>]; <span class="comment">// r1 - r31，用于存储寄存器的值</span></span><br><span class="line">    <span class="keyword">integer</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assign</span> Rs1_data = (Rs1_addr == <span class="number">0</span>) ? <span class="number">0</span> : register[Rs1_addr]; <span class="comment">// 读取寄存器Rs1_addr的值</span></span><br><span class="line">    <span class="keyword">assign</span> Rs2_data = (Rs2_addr == <span class="number">0</span>) ? <span class="number">0</span> : register[Rs2_addr]; <span class="comment">// 读取寄存器Rs2_addr的值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出各个寄存器的值</span></span><br><span class="line">    <span class="keyword">assign</span> Reg00 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">assign</span> Reg01 = register[<span class="number">1</span>]; <span class="keyword">assign</span> Reg02 = register[<span class="number">2</span>]; <span class="keyword">assign</span> Reg03 = register[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg04 = register[<span class="number">4</span>]; <span class="keyword">assign</span> Reg05 = register[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg06 = register[<span class="number">6</span>]; <span class="keyword">assign</span> Reg07 = register[<span class="number">7</span>]; <span class="keyword">assign</span> Reg08 = register[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg09 = register[<span class="number">9</span>]; <span class="keyword">assign</span> Reg10 = register[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg11 = register[<span class="number">11</span>]; <span class="keyword">assign</span> Reg12 = register[<span class="number">12</span>]; <span class="keyword">assign</span> Reg13 = register[<span class="number">13</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg14 = register[<span class="number">14</span>]; <span class="keyword">assign</span> Reg15 = register[<span class="number">15</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg16 = register[<span class="number">16</span>]; <span class="keyword">assign</span> Reg17 = register[<span class="number">17</span>]; <span class="keyword">assign</span> Reg18 = register[<span class="number">18</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg19 = register[<span class="number">19</span>]; <span class="keyword">assign</span> Reg20 = register[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg21 = register[<span class="number">21</span>]; <span class="keyword">assign</span> Reg22 = register[<span class="number">22</span>]; <span class="keyword">assign</span> Reg23 = register[<span class="number">23</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg24 = register[<span class="number">24</span>]; <span class="keyword">assign</span> Reg25 = register[<span class="number">25</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg26 = register[<span class="number">26</span>]; <span class="keyword">assign</span> Reg27 = register[<span class="number">27</span>]; <span class="keyword">assign</span> Reg28 = register[<span class="number">28</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg29 = register[<span class="number">29</span>]; <span class="keyword">assign</span> Reg30 = register[<span class="number">30</span>];</span><br><span class="line">    <span class="keyword">assign</span> Reg31 = register[<span class="number">31</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (rst == <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="number">32</span>; i = i + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                register[i] = <span class="number">0</span>; <span class="comment">// 将寄存器的值初始化为0</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((Wt_addr != <span class="number">0</span>) &amp;&amp; (RegWrite == <span class="number">1</span>)) <span class="keyword">begin</span></span><br><span class="line">            register[Wt_addr] = Wt_data; <span class="comment">// 将寄存器Wt_addr的值设为Wt_data</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>



<h3 id="三：有限状态机实现"><a href="#三：有限状态机实现" class="headerlink" title="三：有限状态机实现"></a>三：有限状态机实现</h3><p>首先设计状态转移图：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411040047904.png" alt="image-20230411040047904"></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> seq(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> reset,</span><br><span class="line">    <span class="keyword">input</span> in,</span><br><span class="line">    <span class="keyword">output</span> out</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">parameter</span> [<span class="number">2</span>:<span class="number">0</span>] S0=<span class="number">3&#x27;b000</span>,</span><br><span class="line">                    S1=<span class="number">3&#x27;b001</span>,</span><br><span class="line">                    S2=<span class="number">3&#x27;b010</span>,</span><br><span class="line">                    S3=<span class="number">3&#x27;b011</span>,</span><br><span class="line">                    S4=<span class="number">3&#x27;b100</span>,</span><br><span class="line">                    S5=<span class="number">3&#x27;b101</span>,</span><br><span class="line">                    S6=<span class="number">3&#x27;b110</span>,</span><br><span class="line">                    S7=<span class="number">3&#x27;b111</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] curr_state;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] next_state;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// State update</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> reset) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (!reset) <span class="keyword">begin</span></span><br><span class="line">            curr_state &lt;= S0;</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            curr_state &lt;= next_state;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// State transfer condition</span></span><br><span class="line">    <span class="keyword">always</span> @(curr_state <span class="keyword">or</span> in) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> (curr_state)</span><br><span class="line">            S0: next_state = in ? S1 : S0;</span><br><span class="line">            S1: next_state = in ? S2 : S0;</span><br><span class="line">            S2: next_state = in ? S3 : S0;</span><br><span class="line">            S3: next_state = in ? S0 : S4;</span><br><span class="line">            S4: next_state = in ? S0 : S5;</span><br><span class="line">            S5: next_state = in ? S6 : S0;</span><br><span class="line">            S6: next_state = in ? S0 : S7;</span><br><span class="line">            S7: next_state = in ? S1 : S0;</span><br><span class="line">            <span class="keyword">default</span>: next_state = S0;</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// State output</span></span><br><span class="line">    <span class="keyword">assign</span> out = (curr_state == S7) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="实验结果与分析-1"><a href="#实验结果与分析-1" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h2><h3 id="一：ALU仿真"><a href="#一：ALU仿真" class="headerlink" title="一：ALU仿真"></a>一：ALU仿真</h3><p>首先设计仿真代码：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> ALU_TB;</span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] A;</span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] B;</span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] ALU_operation;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] res;</span><br><span class="line">  <span class="keyword">wire</span> zero;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 实例化ALU模块</span></span><br><span class="line">  ALU ALU_U(</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.ALU_operation</span>(ALU_operation),</span><br><span class="line">    <span class="variable">.res</span>(res),</span><br><span class="line">    <span class="variable">.zero</span>(zero)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    A = <span class="number">32</span>&#x27;h a5a5a5a5;</span><br><span class="line">    B = <span class="number">32</span>&#x27;h <span class="number">5</span>a5a5a5a;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 分别进行不同的操作并打印结果</span></span><br><span class="line">    ALU_operation = <span class="number">7</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">6</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">5</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">4</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">3</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">2</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">1</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">0</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    </span><br><span class="line">    A = <span class="number">32&#x27;h0</span>;</span><br><span class="line">    B = <span class="number">32&#x27;hFFFFFFFF</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 再次进行不同的操作并打印结果</span></span><br><span class="line">    ALU_operation = <span class="number">2</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">    ALU_operation = <span class="number">7</span>; #<span class="number">50</span>; <span class="built_in">$display</span>(<span class="string">&quot;res = %x, zero = %d&quot;</span>, res, zero);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411041333421.png" alt="image-20230411041333421"><br>$$<br>sltu\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ 00000000\ ;zero&#x3D;1 \<br>sub\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ 4b4b4b4b\ ;zero&#x3D;0 \<br>srl\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ 00000029\ ;zero&#x3D;0 \<br>nor\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ 00000000\ ;zero&#x3D;1 \<br>xor\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ ffffffff\ ;zero&#x3D;0 \<br>add\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ ffffffff\ ;zero&#x3D;0 \<br>or\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ ffffffff\ ;zero&#x3D;0 \<br>and\ a5a5a5a5\ 5a5a5a5a \ &#x3D; \ 00000000\ ;zero&#x3D;1 \<br>add\ 00000000\ ffffffff \ &#x3D; \ ffffffff\ ;zero&#x3D;0 \<br>sltu\ 00000000\ ffffffff \ &#x3D; \ 00000001\ ;zero&#x3D;0<br>$$<br>都符合预期</p>
<h3 id="二、Regfile仿真"><a href="#二、Regfile仿真" class="headerlink" title="二、Regfile仿真"></a>二、Regfile仿真</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> Reg_TB;</span><br><span class="line">  <span class="keyword">reg</span> clk, rst, RegWrite;</span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">4</span>:<span class="number">0</span>] Rs1_addr, Rs2_addr, Wt_addr;</span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] Wt_data;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Rs1_data, Rs2_data;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Reg00, Reg01, Reg02, Reg03, Reg04, Reg05, Reg06, Reg07, Reg08, Reg09;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Reg10, Reg11, Reg12, Reg13, Reg14, Reg15, Reg16, Reg17, Reg18, Reg19;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Reg20, Reg21, Reg22, Reg23, Reg24, Reg25, Reg26, Reg27, Reg28, Reg29;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Reg30, Reg31;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Instantiate the &quot;regs&quot; module with the signals.</span></span><br><span class="line">  <span class="comment">// &quot;regs&quot; is a Verilog module that contains the logic for register operations.</span></span><br><span class="line">  regs regs_U(</span><br><span class="line">    <span class="variable">.clk</span>(clk), <span class="variable">.rst</span>(rst), <span class="variable">.RegWrite</span>(RegWrite),</span><br><span class="line">    <span class="variable">.Rs1_addr</span>(Rs1_addr), <span class="variable">.Rs2_addr</span>(Rs2_addr), <span class="variable">.Wt_addr</span>(Wt_addr),</span><br><span class="line">    <span class="variable">.Wt_data</span>(Wt_data), <span class="variable">.Rs1_data</span>(Rs1_data), <span class="variable">.Rs2_data</span>(Rs2_data),</span><br><span class="line">    <span class="variable">.Reg00</span>(Reg00), <span class="variable">.Reg01</span>(Reg01), <span class="variable">.Reg02</span>(Reg02), <span class="variable">.Reg03</span>(Reg03), <span class="variable">.Reg04</span>(Reg04),</span><br><span class="line">    <span class="variable">.Reg05</span>(Reg05), <span class="variable">.Reg06</span>(Reg06), <span class="variable">.Reg07</span>(Reg07), <span class="variable">.Reg08</span>(Reg08), <span class="variable">.Reg09</span>(Reg09),</span><br><span class="line">    <span class="variable">.Reg10</span>(Reg10), <span class="variable">.Reg11</span>(Reg11), <span class="variable">.Reg12</span>(Reg12), <span class="variable">.Reg13</span>(Reg13), <span class="variable">.Reg14</span>(Reg14),</span><br><span class="line">    <span class="variable">.Reg15</span>(Reg15), <span class="variable">.Reg16</span>(Reg16), <span class="variable">.Reg17</span>(Reg17), <span class="variable">.Reg18</span>(Reg18), <span class="variable">.Reg19</span>(Reg19),</span><br><span class="line">    <span class="variable">.Reg20</span>(Reg20), <span class="variable">.Reg21</span>(Reg21), <span class="variable">.Reg22</span>(Reg22), <span class="variable">.Reg23</span>(Reg23), <span class="variable">.Reg24</span>(Reg24),</span><br><span class="line">    <span class="variable">.Reg25</span>(Reg25), <span class="variable">.Reg26</span>(Reg26), <span class="variable">.Reg27</span>(Reg27), <span class="variable">.Reg28</span>(Reg28), <span class="variable">.Reg29</span>(Reg29),</span><br><span class="line">    <span class="variable">.Reg30</span>(Reg30), <span class="variable">.Reg31</span>(Reg31)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initialize the signals.</span></span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    RegWrite = <span class="number">0</span>;</span><br><span class="line">    rst = <span class="number">1</span>;</span><br><span class="line">    Rs1_addr = <span class="number">0</span>;</span><br><span class="line">    Rs2_addr = <span class="number">0</span>;</span><br><span class="line">    Wt_addr = <span class="number">0</span>;</span><br><span class="line">    Wt_data[<span class="number">31</span>:<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    #<span class="number">100</span>;</span><br><span class="line">    rst = <span class="number">0</span>;</span><br><span class="line">    RegWrite = <span class="number">1</span>;</span><br><span class="line">    Wt_addr[<span class="number">4</span>:<span class="number">0</span>] = <span class="number">4&#x27;h5</span>;</span><br><span class="line">    Wt_data[<span class="number">31</span>:<span class="number">0</span>] = <span class="number">32&#x27;h5a5a5a5a</span>;</span><br><span class="line">    #<span class="number">50</span>;</span><br><span class="line">    RegWrite = <span class="number">1</span>;</span><br><span class="line">    Wt_addr[<span class="number">4</span>:<span class="number">0</span>] = <span class="number">4&#x27;hA</span>;</span><br><span class="line">    Wt_data[<span class="number">31</span>:<span class="number">0</span>] = <span class="number">32&#x27;h5a5a5a5a</span>;</span><br><span class="line">    #<span class="number">50</span>;</span><br><span class="line">    Rs1_addr[<span class="number">4</span>:<span class="number">0</span>] = <span class="number">4&#x27;h5</span>;</span><br><span class="line">    #<span class="number">50</span>;</span><br><span class="line">    Rs2_addr[<span class="number">4</span>:<span class="number">0</span>] = <span class="number">4&#x27;hA</span>;</span><br><span class="line">    #<span class="number">50</span>;</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Generate a clock signal.</span></span><br><span class="line">  <span class="keyword">always</span> <span class="keyword">begin</span></span><br><span class="line">    clk = <span class="number">0</span>;</span><br><span class="line">    #<span class="number">10</span>;</span><br><span class="line">    clk = <span class="number">1</span>;</span><br><span class="line">    #<span class="number">10</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ol>
<li>时钟信号：周期性的上升和下降沿。 </li>
<li>复位信号：开始时为高，然后在100ns后变为低。 </li>
<li>RegWrite信号：在复位后的一段时间内保持高，用于写入操作。然后变为低，用于读取操作。 </li>
<li>Wt_addr信号：在写操作期间，该信号将显示所选寄存器的地址。 </li>
<li>Wt_data信号：在写操作期间，该信号将显示写入寄存器的数据。</li>
<li>Rs1_addr和Rs2_addr信号：在读操作期间，这两个信号将显示所选寄存器的地址。</li>
<li>Rs1_data和Rs2_data信号：在读操作期间，这两个信号将显示从所选寄存器读取的数据。</li>
</ol>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411044322411.png" alt="image-20230411044322411"></p>
<p>符合预期</p>
<h3 id="三：SEQ仿真"><a href="#三：SEQ仿真" class="headerlink" title="三：SEQ仿真"></a>三：SEQ仿真</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Testbench for seq module</span></span><br><span class="line"><span class="keyword">module</span> seq_TB;</span><br><span class="line">    <span class="keyword">reg</span> clk;</span><br><span class="line">    <span class="keyword">reg</span> reset;</span><br><span class="line">    <span class="keyword">reg</span> in;</span><br><span class="line">    <span class="keyword">wire</span> out;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Instantiate seq module</span></span><br><span class="line">    seq seq_U(</span><br><span class="line">        <span class="variable">.clk</span>(clk),</span><br><span class="line">        <span class="variable">.reset</span>(reset),</span><br><span class="line">        <span class="variable">.in</span>(in),</span><br><span class="line">        <span class="variable">.out</span>(out)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Generate clock signal</span></span><br><span class="line">    <span class="keyword">always</span> #<span class="number">20</span> clk = ~clk;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize inputs</span></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        clk = <span class="number">0</span>;</span><br><span class="line">        reset = <span class="number">0</span>;</span><br><span class="line">        in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">20</span> reset = <span class="number">1</span>; <span class="comment">// Assert reset for 20 time units</span></span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">40</span> in = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// Wait for some time to observe output</span></span><br><span class="line">        #<span class="number">100</span>;</span><br><span class="line">        <span class="built_in">$finish</span>; <span class="comment">// End simulation</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411050134826.png" alt="image-20230411050134826"></p>
<ol>
<li>在仿真开始时，<code>reset</code>信号将保持低电平（0），直到20个时间单位后，<code>reset</code>信号将变为高电平（1），以初始化<code>seq</code>模块的状态。在这个时间点，<code>curr_state</code>将被设置为S0（3’b000）。</li>
<li><code>in</code>：<ul>
<li>在仿真开始的第60个时间单位，<code>in</code>将变为1。这将使状态从S0（3’b000）变为S1（3’b001）。</li>
<li>在第100个时间单位，<code>in</code>仍为1。状态将从S1（3’b001）变为S2（3’b010）。</li>
<li>在第140个时间单位，<code>in</code>仍为1。状态将从S2（3’b010）变为S3（3’b011）。</li>
<li>在第180个时间单位，<code>in</code>变为0。状态将从S3（3’b011）变为S4（3’b100）。</li>
<li>在第220个时间单位，<code>in</code>仍为0。状态将从S4（3’b100）变为S5（3’b101）。</li>
<li>在第260个时间单位，<code>in</code>变为1。状态将从S5（3’b101）变为S6（3’b110）。</li>
<li>在第300个时间单位，<code>in</code>变为0。状态将从S6（3’b110）变为S7（3’b111）。</li>
<li>在第340个时间单位，<code>in</code>变为1。状态将从S7（3’b111）变为S1（3’b001）。</li>
<li>在第380个时间单位，<code>in</code>变为0。状态将从S1（3’b001）变为S0（3’b000）。</li>
<li>在第420个时间单位，<code>in</code>变为1。状态将从S0（3’b000）变为S1（3’b001）。</li>
</ul>
</li>
<li>输出信号<code>out</code>在状态为S7（3’b111）时为1，其他情况下为0。因此，在第300个时间单位到第340个时间单位之间，<code>out</code>信号将变为高电平（1）。在其他时间，<code>out</code>信号将保持低电平（0）。</li>
</ol>
<p>符合预期</p>
<h2 id="讨论、心得-1"><a href="#讨论、心得-1" class="headerlink" title="讨论、心得"></a>讨论、心得</h2><p>这次实验主要实现 ALU 模块，Regfile 和有限状态机，我对相关内容了解更加深入，这次实验相对较容易，Regfile 和有限状态机在 PPT 中都有代码，只需将错误部分进行修改，并给 Regfile32 个寄存器的线接出来。</p>
<h3 id="思考题-1"><a href="#思考题-1" class="headerlink" title="思考题"></a>思考题</h3><p>1.现在对 ALU 进行拓展，要求修改 ALU 以<strong>支持两个有符号数的大小比较</strong>，你需要添加哪些端口以支持？（Hint：目前的 ALU 将两个输入都视作无符号数； <code>zero</code> 信号仅能用来判断是否相等）</p>
<p>为了支持两个有符号数的大小比较，我们需要在现有 ALU 的基础上添加一个额外的输出端口，例如 <code>output greater</code>，用于指示 A 是否大于 B。以下是修改后的 ALU module：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> ALU(</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] A,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] B,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">2</span>:<span class="number">0</span>] ALU_operation,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">31</span>:<span class="number">0</span>] res,</span><br><span class="line">    <span class="keyword">output</span> zero,</span><br><span class="line">    <span class="keyword">output</span> greater <span class="comment">// 添加新的输出端口</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">wire</span> signed_less; </span><br><span class="line"></span><br><span class="line">sub_32_0 U11( <span class="comment">// 使用 32 位减法器计算 A - B</span></span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.S</span>(res_signed_less)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assign</span> signed_less = res_signed_less[<span class="number">31</span>]; <span class="comment">// 如果 A - B 的结果为负数，则 A 小于 B</span></span><br><span class="line"><span class="keyword">assign</span> greater = ~signed_less &amp; ~zero; <span class="comment">// 如果 A 不小于 B 且 A 不等于 B，则 A 大于 B</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>2.请画出检测序列 <em>1110010</em> 的 Moore 型 FSM 的状态图（你可以使用纸笔清晰画出并拍照，或使用<a target="_blank" rel="noopener" href="https://app.diagrams.net/"> drawio</a>、<a target="_blank" rel="noopener" href="https://madebyevan.com/fsm/">FSM Designer </a>等工具完成制图）。</p>
<table>
<thead>
<tr>
<th>当前状态</th>
<th>输入</th>
<th>下一个状态</th>
<th>输出</th>
</tr>
</thead>
<tbody><tr>
<td>S0</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S0</td>
<td>1</td>
<td>S1</td>
<td>0</td>
</tr>
<tr>
<td>S1</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S1</td>
<td>1</td>
<td>S2</td>
<td>0</td>
</tr>
<tr>
<td>S2</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S2</td>
<td>1</td>
<td>S3</td>
<td>0</td>
</tr>
<tr>
<td>S3</td>
<td>0</td>
<td>S4</td>
<td>0</td>
</tr>
<tr>
<td>S3</td>
<td>1</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S4</td>
<td>0</td>
<td>S5</td>
<td>0</td>
</tr>
<tr>
<td>S4</td>
<td>1</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>1</td>
<td>S6</td>
<td>0</td>
</tr>
<tr>
<td>S6</td>
<td>0</td>
<td>S7</td>
<td>0</td>
</tr>
<tr>
<td>S6</td>
<td>1</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S7</td>
<td>0</td>
<td>S0</td>
<td>1</td>
</tr>
<tr>
<td>S7</td>
<td>1</td>
<td>S1</td>
<td>1</td>
</tr>
</tbody></table>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411040047904.png" alt="image-20230411040047904"></p>
<p>3.请你修改测试代码，使得给定一个特定输入序列 <code>reg[31:0] input_seq = 32&#39;hD72DBEEF</code> 从高位到低位依次输入到 <code>seq</code> 子模块中。你可以用任何能够使代码更简洁的写法，本题意在考察对 Verilog 语法的熟悉程度。（Hint：如果你没有思路，可以搜索 <code>for loop</code>；还可以用位运算的方式“一次”处理一位）</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> seq_TB;</span><br><span class="line">    <span class="keyword">reg</span> clk;</span><br><span class="line">    <span class="keyword">reg</span> reset;</span><br><span class="line">    <span class="keyword">reg</span> in;</span><br><span class="line">    <span class="keyword">wire</span> out;</span><br><span class="line">    <span class="keyword">integer</span> i;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] input_seq = <span class="number">32&#x27;hD72DBEEF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Instantiate seq module</span></span><br><span class="line">    seq seq_U(</span><br><span class="line">        <span class="variable">.clk</span>(clk),</span><br><span class="line">        <span class="variable">.reset</span>(reset),</span><br><span class="line">        <span class="variable">.in</span>(in),</span><br><span class="line">        <span class="variable">.out</span>(out)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Generate clock signal</span></span><br><span class="line">    <span class="keyword">always</span> #<span class="number">20</span> clk = ~clk;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize inputs</span></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        clk = <span class="number">0</span>;</span><br><span class="line">        reset = <span class="number">0</span>;</span><br><span class="line">        in = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">20</span> reset = <span class="number">1</span>; <span class="comment">// Assert reset for 20 time units</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Apply input_seq to seq module</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">31</span>; i &gt;= <span class="number">0</span>; i = i - <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">            #<span class="number">40</span> in = input_seq[i];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Wait for some time to observe output</span></span><br><span class="line">        #<span class="number">100</span>;</span><br><span class="line">        <span class="built_in">$finish</span>; <span class="comment">// End simulation</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>波形图如图</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411052632294.png" alt="image-20230411052632294"></p>
<h1 id="Lab2"><a href="#Lab2" class="headerlink" title="Lab2 &lt;IP 核集成 SOC 设计&gt;"></a>Lab2 &lt;IP 核集成 SOC 设计&gt;</h1><blockquote>
<p>&lt;3200102318&gt; &lt;杨殿超&gt; <a href="mailto:&#x6e;&#111;&#x69;&#110;&#116;&#x69;&#x69;&#x69;&#105;&#64;&#103;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#x6e;&#111;&#x69;&#110;&#116;&#x69;&#x69;&#x69;&#105;&#64;&#103;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;</a></p>
</blockquote>
<h2 id="操作方法与实验步骤-2"><a href="#操作方法与实验步骤-2" class="headerlink" title="操作方法与实验步骤"></a>操作方法与实验步骤</h2><p>通过第三方 IP 和已有 IP 模块建立 CPU 测试环境（SOC 系统的集成实现）</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> CSSTE(</span><br><span class="line">  <span class="keyword">input</span> clk_100mhz,</span><br><span class="line">  <span class="keyword">input</span> RSTN,</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] BTN_y,</span><br><span class="line">  <span class="keyword">input</span> [<span class="number">15</span>:<span class="number">0</span>] SW,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] Blue,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] Green,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] Red,</span><br><span class="line">  <span class="keyword">output</span> HSYNC,</span><br><span class="line">  <span class="keyword">output</span> VSYNC,</span><br><span class="line">  <span class="keyword">output</span> LED_PEN,</span><br><span class="line">  <span class="keyword">output</span> SEG_PEN,</span><br><span class="line">  <span class="keyword">output</span> led_clk,</span><br><span class="line">  <span class="keyword">output</span> led_clrn,</span><br><span class="line">  <span class="keyword">output</span> led_sout,</span><br><span class="line">  <span class="keyword">output</span> seg_clk,</span><br><span class="line">  <span class="keyword">output</span> seg_clrn,</span><br><span class="line">  <span class="keyword">output</span> seg_sout</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 输入输出信号的定义</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Addr_out;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Data_in;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Data_out;</span><br><span class="line">  <span class="keyword">wire</span> MemRW;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] PC_out;</span><br><span class="line">  <span class="keyword">wire</span> Clk_CPU;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Inst_in;</span><br><span class="line">  <span class="keyword">wire</span> rst;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">9</span>:<span class="number">0</span>] ram_addr;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] ram_data_in;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] RAM_B_0_douta;</span><br><span class="line">  <span class="keyword">wire</span> U4_data_ram_we;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>] BTN_OK;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] SW_OK;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] LED_out;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] counter_out;</span><br><span class="line">  <span class="keyword">wire</span> counter0_OUT;</span><br><span class="line">  <span class="keyword">wire</span> counter1_OUT;</span><br><span class="line">  <span class="keyword">wire</span> counter2_OUT;</span><br><span class="line">  <span class="comment">//wire [31:0] Cpu_data4bus;</span></span><br><span class="line">  <span class="keyword">wire</span> GPIOf0000000_we;</span><br><span class="line">  <span class="keyword">wire</span> GPIOe0000000_we;</span><br><span class="line">  <span class="keyword">wire</span> counter_we;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Peripheral_in;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] U5_point_out;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] U5_LE_out;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] Disp_num;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] clkdiv;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>] counter_set;</span><br><span class="line">  <span class="keyword">wire</span> STEP=SW_OK[<span class="number">10</span>]|BTN_OK[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 模块实例化</span></span><br><span class="line">  SCPU U1(</span><br><span class="line">    <span class="variable">.Addr_out</span>(Addr_out),</span><br><span class="line">    <span class="variable">.Data_in</span>(Data_in),</span><br><span class="line">    <span class="variable">.Data_out</span>(Data_out),</span><br><span class="line">    <span class="variable">.MemRW</span>(MemRW),</span><br><span class="line">    <span class="variable">.PC_out</span>(PC_out),</span><br><span class="line">    <span class="variable">.clk</span>(Clk_CPU),</span><br><span class="line">    <span class="variable">.inst_in</span>(Inst_in),</span><br><span class="line">    <span class="variable">.rst</span>(rst)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  Rom_D_0 U2(</span><br><span class="line">    <span class="variable">.a</span>(PC_out[<span class="number">11</span>:<span class="number">2</span>]),</span><br><span class="line">    <span class="variable">.spo</span>(Inst_in)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  RAM U3(</span><br><span class="line">    <span class="variable">.addra</span>(ram_addr),</span><br><span class="line">    <span class="variable">.clka</span>(~clk_100mhz),</span><br><span class="line">    <span class="variable">.dina</span>(ram_data_in),</span><br><span class="line">    <span class="variable">.douta</span>(RAM_B_0_douta),</span><br><span class="line">    <span class="variable">.wea</span>(U4_data_ram_we)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  MIO_BUS U4(</span><br><span class="line">    <span class="variable">.clk</span>(clk_100mhz),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.BTN</span>(BTN_OK),</span><br><span class="line">    <span class="variable">.SW</span>(SW_OK),</span><br><span class="line">    <span class="variable">.mem_w</span>(MemRW),</span><br><span class="line">    <span class="variable">.Cpu_data2bus</span>(Data_out),</span><br><span class="line">    <span class="variable">.addr_bus</span>(Addr_out),</span><br><span class="line">    <span class="variable">.ram_data_out</span>(RAM_B_0_douta),</span><br><span class="line">    <span class="variable">.led_out</span>(LED_out),</span><br><span class="line">    <span class="variable">.counter_out</span>(counter_out),</span><br><span class="line">    <span class="variable">.counter0_out</span>(counter0_OUT),</span><br><span class="line">    <span class="variable">.counter1_out</span>(counter1_OUT),</span><br><span class="line">    <span class="variable">.counter2_out</span>(counter2_OUT),</span><br><span class="line">    <span class="variable">.Cpu_data4bus</span>(Data_in),</span><br><span class="line">    <span class="variable">.ram_data_in</span>(ram_data_in),</span><br><span class="line">    <span class="variable">.ram_addr</span>(ram_addr),</span><br><span class="line">    <span class="variable">.data_ram_we</span>(U4_data_ram_we),</span><br><span class="line">    <span class="variable">.GPIOf0000000_we</span>(GPIOf0000000_we),</span><br><span class="line">	<span class="variable">.GPIOe0000000_we</span>(GPIOe0000000_we),</span><br><span class="line">	<span class="variable">.counter_we</span>(counter_we),</span><br><span class="line">	<span class="variable">.Peripheral_in</span>(Peripheral_in)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  Multi_8CH32 U5(</span><br><span class="line">    <span class="variable">.clk</span>(~Clk_CPU),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.EN</span>(GPIOe0000000_we),</span><br><span class="line">    <span class="variable">.Test</span>(SW_OK[<span class="number">7</span>:<span class="number">5</span>]),</span><br><span class="line">    <span class="variable">.point_in</span>(&#123;clkdiv[<span class="number">31</span>:<span class="number">0</span>], clkdiv[<span class="number">31</span>:<span class="number">0</span>]&#125;),</span><br><span class="line">    <span class="variable">.LES</span>(<span class="number">64&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.Data0</span>(Peripheral_in),</span><br><span class="line">    <span class="variable">.data1</span>(&#123;<span class="number">2&#x27;b0</span>, PC_out[<span class="number">31</span>:<span class="number">2</span>]&#125;),</span><br><span class="line">    <span class="variable">.data2</span>(Inst_in),</span><br><span class="line">    <span class="variable">.data3</span>(counter_out),</span><br><span class="line">    <span class="variable">.data4</span>(Addr_out),</span><br><span class="line">    <span class="variable">.data5</span>(Data_out),</span><br><span class="line">    <span class="variable">.data6</span>(Data_in),</span><br><span class="line">    <span class="variable">.data7</span>(PC_out),</span><br><span class="line">    <span class="variable">.point_out</span>(U5_point_out),</span><br><span class="line">    <span class="variable">.LE_out</span>(U5_LE_out),</span><br><span class="line">    <span class="variable">.Disp_num</span>(Disp_num)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  SSeg7_Dev_0 U6(</span><br><span class="line">    <span class="variable">.clk</span>(clk_100mhz),</span><br><span class="line">    <span class="variable">.flash</span>(clkdiv[<span class="number">25</span>]),</span><br><span class="line">    <span class="variable">.Hexs</span>(Disp_num),</span><br><span class="line">    <span class="variable">.LES</span>(U5_LE_out),</span><br><span class="line">    <span class="variable">.point</span>(U5_point_out),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.Start</span>(clkdiv[<span class="number">20</span>]),</span><br><span class="line">    <span class="variable">.SW0</span>(SW_OK[<span class="number">0</span>]),</span><br><span class="line">    <span class="variable">.seg_clk</span>(seg_clk),</span><br><span class="line">    <span class="variable">.seg_clrn</span>(seg_clrn),</span><br><span class="line">    <span class="variable">.SEG_PEN</span>(SEG_PEN),</span><br><span class="line">    <span class="variable">.seg_sout</span>(seg_sout)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  SPIO U7(</span><br><span class="line">    <span class="variable">.clk</span>(~Clk_CPU),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.Start</span>(clkdiv[<span class="number">20</span>]),</span><br><span class="line">    <span class="variable">.EN</span>(GPIOf0000000_we),</span><br><span class="line">    <span class="variable">.P_Data</span>(Peripheral_in),</span><br><span class="line">    <span class="variable">.counter_set</span>(counter_set),</span><br><span class="line">    <span class="variable">.LED_out</span>(LED_out),</span><br><span class="line">    <span class="variable">.led_clk</span>(led_clk),</span><br><span class="line">    <span class="variable">.led_sout</span>(led_sout),</span><br><span class="line">    <span class="variable">.led_clrn</span>(led_clrn),</span><br><span class="line">    <span class="variable">.LED_PEN</span>(LED_PEN)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  clk_div U8(</span><br><span class="line">    <span class="variable">.clk</span>(clk_100mhz),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.SW2</span>(SW_OK[<span class="number">2</span>]),</span><br><span class="line">    <span class="variable">.SW8</span>(SW_OK[<span class="number">8</span>]),</span><br><span class="line">    <span class="variable">.STEP</span>(STEP),</span><br><span class="line">    <span class="variable">.clkdiv</span>(clkdiv),</span><br><span class="line">    <span class="variable">.Clk_CPU</span>(Clk_CPU)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  SAnti_jitter U9(</span><br><span class="line">    <span class="variable">.clk</span>(clk_100mhz),</span><br><span class="line">    <span class="variable">.RSTN</span>(RSTN),</span><br><span class="line">    <span class="comment">//.readn(readn),</span></span><br><span class="line">    <span class="variable">.Key_y</span>(BTN_y),</span><br><span class="line">    <span class="variable">.SW</span>(SW),</span><br><span class="line">    <span class="comment">//.Key_x(Key_x),</span></span><br><span class="line">    <span class="comment">//.Key_out(Key_out),</span></span><br><span class="line">    <span class="comment">//.Key_ready(Key_ready),</span></span><br><span class="line">    <span class="comment">//.pulse_out(pulse_out),</span></span><br><span class="line">    <span class="variable">.BTN_OK</span>(BTN_OK),</span><br><span class="line">    <span class="variable">.SW_OK</span>(SW_OK),</span><br><span class="line">    <span class="comment">//.CR(CR),</span></span><br><span class="line">    <span class="variable">.rst</span>(rst)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  Counter_x U10(</span><br><span class="line">    <span class="variable">.clk</span>(~Clk_CPU),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.clk0</span>(clkdiv[<span class="number">6</span>]),</span><br><span class="line">    <span class="variable">.clk1</span>(clkdiv[<span class="number">9</span>]),</span><br><span class="line">    <span class="variable">.clk2</span>(clkdiv[<span class="number">11</span>]),</span><br><span class="line">    <span class="variable">.counter_we</span>(counter_we),</span><br><span class="line">    <span class="variable">.counter_val</span>(Peripheral_in),</span><br><span class="line">    <span class="variable">.counter_ch</span>(counter_set),</span><br><span class="line">    <span class="variable">.counter0_OUT</span>(counter0_OUT),</span><br><span class="line">    <span class="variable">.counter1_OUT</span>(counter1_OUT),</span><br><span class="line">    <span class="variable">.counter2_OUT</span>(counter2_OUT),</span><br><span class="line">    <span class="variable">.counter_out</span>(counter_out)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  VGA U11 (</span><br><span class="line">    <span class="variable">.clk_25m</span>(clkdiv[<span class="number">1</span>]),</span><br><span class="line">    <span class="variable">.clk_100m</span>(clk_100mhz),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.pc</span>(PC_out),</span><br><span class="line">    <span class="variable">.inst</span>(Inst_in),</span><br><span class="line">    <span class="variable">.alu_res</span>(Addr_out),</span><br><span class="line">    <span class="variable">.mem_wen</span>(MemRW),</span><br><span class="line">    <span class="variable">.dmem_o_data</span>(RAM_B_0_douta),</span><br><span class="line">    <span class="variable">.dmem_i_data</span>(ram_data_in),</span><br><span class="line">    <span class="variable">.dmem_addr</span>(Addr_out),</span><br><span class="line">    <span class="variable">.hs</span>(HSYNC),</span><br><span class="line">    <span class="variable">.vs</span>(VSYNC),</span><br><span class="line">    <span class="variable">.vga_r</span>(Red),</span><br><span class="line">    <span class="variable">.vga_g</span>(Green),</span><br><span class="line">    <span class="variable">.vga_b</span>(Blue)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>添加源文件 clk_div.v</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> clk_div(</span><br><span class="line">  <span class="keyword">input</span> clk,  </span><br><span class="line">  <span class="keyword">input</span> rst,  </span><br><span class="line">  <span class="keyword">input</span> SW2,SW8,STEP,   </span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>]clkdiv,    <span class="comment">// 32 位计数分频输出</span></span><br><span class="line">  <span class="keyword">output</span> Clk_CPU</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (rst) </span><br><span class="line">      clkdiv &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">      clkdiv &lt;= clkdiv + <span class="number">1&#x27;b1</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">assign</span> Clk_CPU = (SW8 == <span class="number">1</span>) ? STEP : (SW2 == <span class="number">1</span>) ? clkdiv[<span class="number">24</span>] : clkdiv[<span class="number">2</span>];</span><br><span class="line">  </span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411054325350.png" alt="image-20230411054325350"></p>
<p>根据要求，需要修改 VGA.v 模块，以便将其他调试信号接入到 VGA 模块并在屏幕上显示。</p>
<p>首先，需要在 VGA.v 的端口描述中添加调试信号输入。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] rs1,</span><br><span class="line"><span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] rs1_val,</span><br><span class="line"><span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] rs2,</span><br><span class="line"><span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] rs2_val,</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>接下来，将这些新添加的端口连接到 VgaDebugger 实例：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">VgaDebugger vga_debugger(</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">    <span class="variable">.rs1</span>(rs1),</span><br><span class="line">    <span class="variable">.rs1_val</span>(rs1_val),</span><br><span class="line">    <span class="variable">.rs2</span>(rs2),</span><br><span class="line">    <span class="variable">.rs2_val</span>(rs2_val),</span><br><span class="line">    <span class="comment">//... </span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="实验结果与分析-2"><a href="#实验结果与分析-2" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h2><p>SW[8]置高</p>
<table>
<thead>
<tr>
<th>第一条指令：</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>SW[7:5] ：001</td>
<td>010</td>
<td>100</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055744894.png" alt="image-20230411055744894"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055758137.png" alt="image-20230411055758137"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055812535.png" alt="image-20230411055812535"></td>
</tr>
<tr>
<td>101</td>
<td>110</td>
<td>111</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055853041.png" alt="image-20230411055853041"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055857593.png" alt="image-20230411055857593"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411055900734.png" alt="image-20230411055900734"></td>
</tr>
<tr>
<td><strong>第二条指令：</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>SW[7:5] ：001</td>
<td>010</td>
<td>100</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060006218.png" alt="image-20230411060006218"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060009135.png" alt="image-20230411060009135"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060012292.png" alt="image-20230411060012292"></td>
</tr>
<tr>
<td>101</td>
<td>110</td>
<td>111</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060015584.png" alt="image-20230411060015584"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060018631.png" alt="image-20230411060018631"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060021416.png" alt="image-20230411060021416"></td>
</tr>
<tr>
<td><strong>第三条指令：</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>SW[7:5] ：001</td>
<td>010</td>
<td>100</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060119208.png" alt="image-20230411060119208"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060121776.png" alt="image-20230411060121776"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060124950.png" alt="image-20230411060124950"></td>
</tr>
<tr>
<td>101</td>
<td>110</td>
<td>111</td>
</tr>
<tr>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060127689.png" alt="image-20230411060127689"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060130394.png" alt="image-20230411060130394"></td>
<td><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060133008.png" alt="image-20230411060133008"></td>
</tr>
</tbody></table>
<p>res变化符合斐波那契数列：</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060241699.png" alt="image-20230411060241699"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060345484.png" alt="image-20230411060345484"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060431522.png" alt="image-20230411060431522"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411060525465.png" alt="image-20230411060525465"></p>
<h2 id="讨论、心得-2"><a href="#讨论、心得-2" class="headerlink" title="讨论、心得"></a>讨论、心得</h2><p>这次实验通过实现CSSTE硬件描述、clk_div模块，调用文件夹中给的IP，搭建了一个CPU，接下来就是准备冲刺单周期！</p>
<h1 id="Lab3"><a href="#Lab3" class="headerlink" title="Lab3 &lt;复杂操作实现&gt;"></a>Lab3 &lt;复杂操作实现&gt;</h1><blockquote>
<p>&lt;3200102318&gt; &lt;杨殿超&gt; <a href="mailto:&#x6e;&#111;&#105;&#110;&#116;&#105;&#x69;&#x69;&#x69;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;">&#x6e;&#111;&#105;&#110;&#116;&#105;&#x69;&#x69;&#x69;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;</a></p>
</blockquote>
<h2 id="操作方法与实验步骤-3"><a href="#操作方法与实验步骤-3" class="headerlink" title="操作方法与实验步骤"></a>操作方法与实验步骤</h2><h3 id="一：乘法器"><a href="#一：乘法器" class="headerlink" title="一：乘法器"></a>一：乘法器</h3><p>采用Booth算法进行有符号整数乘法</p>
<p>输入：</p>
<ul>
<li>clk：时钟信号，用于同步电路</li>
<li>rst：复位信号，用于初始化电路状态</li>
<li>multiplicand：32位被乘数</li>
<li>multiplier：32位乘数</li>
<li>start：开始信号，用于启动乘法操作</li>
</ul>
<p>输出：</p>
<ul>
<li>product：64位输出结果，存放乘法运算的结果</li>
<li>finish：完成信号，表示乘法运算完成</li>
</ul>
<p>使用有限状态机（FSM），包含四个状态：IDLE（空闲）、ADD（加法）、SHIFT（移位）和OUTPUT（输出）。</p>
<p>主要步骤：</p>
<ol>
<li>初始化状态：在复位信号rst为0时，当前状态curr_state设置为IDLE（空闲）状态。</li>
<li>状态转移：根据当前状态，确定下一个状态next_state。例如，在IDLE状态下，如果计数器ct小于31，则进入ADD状态；否则，保持在IDLE状态。</li>
<li>计数器和完成信号的初始化：在启动信号start为1时，将计数器ct重置为0，完成信号finish置0。</li>
<li>实现Booth算法：根据当前状态执行Booth算法的操作。在IDLE状态下，初始化乘积寄存器product。在ADD状态下，根据product的最低位和booth_temp的值执行加法或减法操作。在SHIFT状态下，执行算术右移操作，并更新计数器ct。在OUTPUT状态下，将完成信号finish置1，表示乘法操作完成。。</li>
</ol>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> mul32(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] multiplicand,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] multiplier,</span><br><span class="line">    <span class="keyword">input</span> start,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">63</span>:<span class="number">0</span>] product,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> finish</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">parameter</span> [<span class="number">1</span>:<span class="number">0</span>] IDLE=<span class="number">2&#x27;b00</span>, ADD=<span class="number">2&#x27;b01</span>, SHIFT=<span class="number">2&#x27;b10</span>, OUTPUT=<span class="number">2&#x27;b11</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] curr_state;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] next_state;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">63</span>:<span class="number">0</span>] temp;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">6</span>:<span class="number">0</span>] ct;</span><br><span class="line"><span class="keyword">reg</span> booth_temp;</span><br><span class="line"></span><br><span class="line"><span class="comment">//state transfer</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span>(!rst) curr_state &lt;= IDLE;</span><br><span class="line">    <span class="keyword">else</span> curr_state &lt;= next_state;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//transfer condition</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span> (curr_state)</span><br><span class="line">        IDLE : <span class="keyword">if</span>(ct&lt;<span class="number">31</span>) next_state &lt;= ADD;</span><br><span class="line">               <span class="keyword">else</span> next_state &lt;= IDLE;</span><br><span class="line">        ADD : next_state &lt;= SHIFT;</span><br><span class="line">        SHIFT : <span class="keyword">if</span>(ct==<span class="number">31</span>) next_state &lt;= OUTPUT;</span><br><span class="line">                <span class="keyword">else</span> next_state &lt;= ADD;</span><br><span class="line">        OUTPUT: next_state &lt;= IDLE;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> start) <span class="keyword">begin</span></span><br><span class="line">    ct &lt;= <span class="number">0</span>;</span><br><span class="line">    finish &lt;= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Booth algorithm</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span> (curr_state)</span><br><span class="line">        IDLE: <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(finish==<span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                product[<span class="number">31</span>:<span class="number">0</span>] &lt;= multiplier;</span><br><span class="line">                product[<span class="number">63</span>:<span class="number">32</span>] &lt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            booth_temp &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        ADD: <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">case</span> (&#123;product[<span class="number">0</span>], booth_temp&#125;)</span><br><span class="line">                <span class="number">2&#x27;b01</span> : product[<span class="number">63</span>:<span class="number">32</span>] &lt;= product[<span class="number">63</span>:<span class="number">32</span>] + multiplicand;</span><br><span class="line">                <span class="number">2&#x27;b10</span> : product[<span class="number">63</span>:<span class="number">32</span>] &lt;= product[<span class="number">63</span>:<span class="number">32</span>] - multiplicand;</span><br><span class="line">                <span class="number">2&#x27;b00</span>,<span class="number">2&#x27;b11</span> : ;</span><br><span class="line">            <span class="keyword">endcase</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        SHIFT: <span class="keyword">begin</span></span><br><span class="line">            booth_temp &lt;= product[<span class="number">0</span>];</span><br><span class="line">            product &lt;= (<span class="built_in">$signed</span>(product) &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">            ct &lt;= ct+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        OUTPUT : <span class="keyword">begin</span></span><br><span class="line">            finish &lt;= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="二：除法器"><a href="#二：除法器" class="headerlink" title="二：除法器"></a>二：除法器</h3><p>实现32位有符号除法</p>
<p>输入包括时钟信号（clk）、复位信号（rst）、开始信号（start）、被除数（dividend）和除数（divisor）</p>
<p>输号包括计算完成信号（finish）、商（quotient）、余数（remainder）和除数为零的情况（divide_zero）。</p>
<p>首先，定义一组参数（IDLE、SUB、SHIFT、OUTPUT）作为状态机的状态。在这个状态机中，IDLE表示空闲状态，SUB表示减法状态，SHIFT表示移位状态，OUTPUT表示输出状态。</p>
<p>然后定义一组寄存器用于存储各种中间值，如下：</p>
<ul>
<li>curr_state 和 next_state 用于存储状态机的当前状态和下一状态。</li>
<li>divisor_abs 用于存储除数的绝对值。</li>
<li>dividend_is_neg 和 divisor_is_neg 用于标记被除数和除数是否为负数。</li>
<li>state 用于存储状态的临时值。</li>
<li>ct 是计数器，用于计算已执行的操作数。</li>
<li>quotient_to_remainder 用于在 SHIFT 状态时从商的最高位传递到余数的最低位。</li>
<li>quotient_bit 用于在 SUB 状态时确定当前商的位值。</li>
</ul>
<p>主要逻辑部分包括状态转换和除法计算。</p>
<ol>
<li>状态转换：在每个时钟上升沿或复位信号下降沿，当前状态将根据下一状态进行更新。</li>
<li>转换条件：根据当前状态确定下一状态。</li>
<li>初始化：当开始信号上升时，初始化计数器、完成信号、除数为零情况以及被除数和除数的正负标志。</li>
<li>除法计算：在每个时钟上升沿或复位信号下降沿进行除法计算。根据当前状态执行不同的操作，主要包括以下步骤：<ul>
<li>IDLE：空闲状态，初始化商、余数和除数的绝对值。检查除数是否为零，若为零，设置除零信号。</li>
<li>SUB：减法状态，用当前余数减去除数的绝对值，若结果为负，则将除数的绝对值加回余数，并设置当前商位为0；否则设置当前商位为1。更新计数器和状态。</li>
<li>SHIFT：移位状态，将商和余数左移一位，将商的最高位传递给余数的最低位，并将当前商位值设置为quotient_bit。更新状态。</li>
<li>OUTPUT：输出状态，根据被除数和除数的正负标志调整商和余数的符号，设置完成信号。更新状态。</li>
</ul>
</li>
</ol>
<p>当状态机完成32次迭代并到达输出状态时，输出商（quotient）和余数（remainder），以及完成信号（finish）。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> div32(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">input</span> start,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] dividend,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] divisor,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> finish,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] quotient,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] remainder,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> divide_zero</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">parameter</span> [<span class="number">1</span>:<span class="number">0</span>] IDLE=<span class="number">2&#x27;b00</span>,</span><br><span class="line">                   SUB=<span class="number">2&#x27;b01</span>,</span><br><span class="line">                   SHIFT=<span class="number">2&#x27;b10</span>,</span><br><span class="line">                   OUTPUT=<span class="number">2&#x27;b11</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] curr_state;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] next_state;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] divisor_abs;</span><br><span class="line">    <span class="keyword">reg</span> dividend_is_neg;</span><br><span class="line">    <span class="keyword">reg</span> divisor_is_neg;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] state;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">6</span>:<span class="number">0</span>] ct;</span><br><span class="line">    <span class="keyword">reg</span> quotient_to_remainder;</span><br><span class="line">    <span class="keyword">reg</span> quotient_bit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//state transfer</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst) curr_state &lt;= IDLE;</span><br><span class="line">        <span class="keyword">else</span> curr_state &lt;= next_state;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//transfer condition</span></span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> (curr_state)</span><br><span class="line">            IDLE : <span class="keyword">if</span>(ct&lt;<span class="number">31</span>) next_state &lt;= SHIFT;</span><br><span class="line">                   <span class="keyword">else</span> next_state &lt;= IDLE;</span><br><span class="line">            SUB : next_state &lt;= SHIFT;</span><br><span class="line">            SHIFT : <span class="keyword">if</span>(ct==<span class="number">32</span>) next_state &lt;= OUTPUT;</span><br><span class="line">                    <span class="keyword">else</span> next_state &lt;= SUB;</span><br><span class="line">            OUTPUT: next_state &lt;= IDLE;</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> start) <span class="keyword">begin</span></span><br><span class="line">        ct &lt;= <span class="number">0</span>;</span><br><span class="line">        finish &lt;= <span class="number">0</span>;</span><br><span class="line">        divide_zero &lt;= <span class="number">0</span>; <span class="comment">// Initialize divide_zero</span></span><br><span class="line">        dividend_is_neg &lt;= <span class="number">0</span>;</span><br><span class="line">        divisor_is_neg &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//divide v3</span></span><br><span class="line">    <span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> (curr_state)</span><br><span class="line">            IDLE: <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">if</span>(finish==<span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                    quotient[<span class="number">31</span>:<span class="number">0</span>] &lt;= dividend;</span><br><span class="line">                    <span class="keyword">if</span>(dividend[<span class="number">31</span>]==<span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                        quotient[<span class="number">31</span>:<span class="number">0</span>] &lt;= -dividend;</span><br><span class="line">                        dividend_is_neg=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                    remainder[<span class="number">31</span>:<span class="number">0</span>] &lt;= <span class="number">0</span>;</span><br><span class="line">                    divisor_abs &lt;= divisor;</span><br><span class="line">                    <span class="keyword">if</span>(divisor[<span class="number">31</span>]==<span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                        divisor_abs &lt;= -divisor;</span><br><span class="line">                        divisor_is_neg=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// Check for divide by zero</span></span><br><span class="line">                    <span class="keyword">if</span> (divisor == <span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                        finish &lt;= <span class="number">1</span>;</span><br><span class="line">                        divide_zero &lt;= <span class="number">1</span>;</span><br><span class="line">                        quotient &lt;= <span class="number">32&#x27;b0</span>;</span><br><span class="line">                        remainder &lt;= <span class="number">32&#x27;b0</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                quotient_bit = <span class="number">0</span>;</span><br><span class="line">                state &lt;= <span class="number">2&#x27;b00</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            SUB: <span class="keyword">begin</span></span><br><span class="line">                remainder[<span class="number">31</span>:<span class="number">0</span>] = remainder[<span class="number">31</span>:<span class="number">0</span>]-divisor_abs;</span><br><span class="line">                quotient_bit = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(remainder[<span class="number">31</span>]==<span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                    remainder[<span class="number">31</span>:<span class="number">0</span>] = remainder[<span class="number">31</span>:<span class="number">0</span>]+divisor_abs;</span><br><span class="line">                    quotient_bit = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                ct = ct+<span class="number">1</span>;</span><br><span class="line">                state = <span class="number">2&#x27;b01</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            SHIFT: <span class="keyword">begin</span></span><br><span class="line">                quotient_to_remainder = quotient[<span class="number">31</span>];</span><br><span class="line">                remainder = remainder &lt;&lt; <span class="number">1</span>;</span><br><span class="line">                remainder[<span class="number">0</span>]=quotient_to_remainder;</span><br><span class="line">                quotient = quotient &lt;&lt; <span class="number">1</span>;</span><br><span class="line">                quotient[<span class="number">0</span>] = quotient_bit;</span><br><span class="line">                state = <span class="number">2&#x27;b10</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            OUTPUT : <span class="keyword">begin</span></span><br><span class="line">                remainder = (<span class="built_in">$signed</span>(remainder) &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">case</span> (&#123;dividend_is_neg, divisor_is_neg&#125;)</span><br><span class="line">                    <span class="number">2&#x27;b01</span> : quotient = -quotient;</span><br><span class="line">                    <span class="number">2&#x27;b10</span> : <span class="keyword">begin</span></span><br><span class="line">                        quotient = -quotient;</span><br><span class="line">                        remainder = -remainder;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                    <span class="number">2&#x27;b11</span> : remainder = -remainder;</span><br><span class="line">                    <span class="number">2&#x27;b00</span> : ;</span><br><span class="line">                <span class="keyword">endcase</span></span><br><span class="line">                finish = <span class="number">1</span>;</span><br><span class="line">                state = <span class="number">2&#x27;b11</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"> <span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h3 id="三：浮点加减法"><a href="#三：浮点加减法" class="headerlink" title="三：浮点加减法"></a>三：浮点加减法</h3><p> 32 位浮点数加法器,根据控制信号 c，模块可以执行加法或减法。模块还有一个使能信号 en，当 en &#x3D; 1 时，模块开始运行。当计算完成时，模块将计算结果存储在 32 位寄存器 result 中，并将输出信号 fin 置为 1。</p>
<p>该模块采用有限状态机（FSM）的设计方法，包括五个状态：IDLE（空闲）、ADD（加法&#x2F;减法）、NORMALIZE（规格化）、ROUND（舍入）和 OUTPUT（输出）。状态之间的转换是由时钟信号 clk 和复位信号 rst 控制的。</p>
<ol>
<li>定义输入、输出和参数：模块接收时钟信号 clk、复位信号 rst、两个 32 位浮点数输入 A 和 B、2 位控制信号 c 和使能信号 en。输出包括 32 位寄存器 result 和一个表示计算完成的信号 fin。</li>
<li>定义状态变量：curr_state、next_state、state 用于表示 FSM 的状态，exp、exp_dif 用于表示指数和指数差，m、m0、m1 用于表示尾数及其中间结果，neg 用于表示结果的符号。</li>
<li>状态转换逻辑：这部分代码描述了如何根据时钟和复位信号更新当前状态。在每个时钟上升沿，当前状态 curr_state 将更新为 next_state；在复位信号下降沿，当前状态将重置为 IDLE。</li>
<li>状态转换条件：这部分代码描述了在当前状态下如何确定下一个状态。例如，在 IDLE 状态下，如果计算尚未完成（fin 不为 1），则进入 ADD 状态。</li>
<li>初始化逻辑：在输入 A 或 B 改变时，将 fin 置为 0、neg 置为 0，result 清零。</li>
<li>浮点数加法逻辑：这部分代码实现了 FSM 的具体操作，包括加法&#x2F;减法、规格化、舍入和输出结果。在 ADD 状态下，计算指数差、更新尾数 m0 和 m1；在 NORMALIZE 状态下，规格化结果尾数 m；在 ROUND 状态下，进行舍入（本例中没有实际舍入操作）；在 OUTPUT 状态下，将计算结果存储到 result 寄存器并设置 fin 信号为 1。</li>
</ol>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> float_add_32(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] A,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] B,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">1</span>:<span class="number">0</span>] c, <span class="comment">// 00 +, 01 -, 10 *, 11 /</span></span><br><span class="line">    <span class="keyword">input</span> en, <span class="comment">// en = 1, begin</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] result,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> fin <span class="comment">// fin = 1 when finish</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">parameter</span> [<span class="number">2</span>:<span class="number">0</span>] IDLE=<span class="number">3&#x27;b000</span>,</span><br><span class="line">                ADD=<span class="number">3&#x27;b001</span>,</span><br><span class="line">                NORMALIZE=<span class="number">3&#x27;b010</span>,</span><br><span class="line">                ROUND=<span class="number">3&#x27;b011</span>,</span><br><span class="line">                OUTPUT=<span class="number">3&#x27;b100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] curr_state;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] next_state;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] state;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] exp;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] exp_dif;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">25</span>:<span class="number">0</span>] m;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">25</span>:<span class="number">0</span>] m0;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">25</span>:<span class="number">0</span>] m1;</span><br><span class="line"><span class="keyword">reg</span> neg;</span><br><span class="line"></span><br><span class="line"><span class="comment">//state transfer</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span>(rst) curr_state &lt;= IDLE;</span><br><span class="line">    <span class="keyword">else</span> curr_state &lt;= next_state;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//transfer condition</span></span><br><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span> (curr_state)</span><br><span class="line">        IDLE : <span class="keyword">if</span>(!fin) next_state &lt;= ADD;</span><br><span class="line">               <span class="keyword">else</span> next_state &lt;= IDLE;</span><br><span class="line">        ADD : next_state &lt;= NORMALIZE;</span><br><span class="line">        NORMALIZE : next_state &lt;= ROUND;</span><br><span class="line">        ROUND: next_state &lt;= OUTPUT;</span><br><span class="line">        OUTPUT: next_state &lt;= IDLE;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @(A <span class="keyword">or</span> B) <span class="keyword">begin</span></span><br><span class="line">    fin &lt;= <span class="number">0</span>;</span><br><span class="line">    neg &lt;= <span class="number">0</span>;</span><br><span class="line">    result &lt;= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//float_add</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span> (curr_state)</span><br><span class="line">        IDLE: <span class="keyword">begin</span></span><br><span class="line">            state &lt;= <span class="number">3&#x27;b000</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        ADD: <span class="keyword">begin</span></span><br><span class="line">            exp_dif = A[<span class="number">30</span>:<span class="number">23</span>] - B[<span class="number">30</span>:<span class="number">23</span>];</span><br><span class="line">            <span class="keyword">if</span>(exp_dif[<span class="number">7</span>]==<span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                exp = A[<span class="number">30</span>:<span class="number">23</span>];</span><br><span class="line">                m1 = &#123;<span class="number">3&#x27;b001</span>, B[<span class="number">22</span>:<span class="number">0</span>]&#125;;</span><br><span class="line">                m1 = m1 &gt;&gt; exp_dif;</span><br><span class="line">                m0 = &#123;<span class="number">3&#x27;b001</span>, A[<span class="number">22</span>:<span class="number">0</span>]&#125;;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                exp = B[<span class="number">30</span>:<span class="number">23</span>];</span><br><span class="line">                m0 = &#123;<span class="number">3&#x27;b001</span>, A[<span class="number">22</span>:<span class="number">0</span>]&#125;;</span><br><span class="line">                m0 = m0 &gt;&gt; exp_dif;</span><br><span class="line">                m1 = &#123;<span class="number">3&#x27;b001</span>, B[<span class="number">22</span>:<span class="number">0</span>]&#125;;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>(A[<span class="number">31</span>]==<span class="number">1</span>) m0 = -m0;</span><br><span class="line">            <span class="keyword">if</span>(B[<span class="number">31</span>]==<span class="number">1</span>) m1 = -m1;</span><br><span class="line">            <span class="keyword">case</span>(c)</span><br><span class="line">                <span class="number">2&#x27;b00</span>: m = m0 + m1;</span><br><span class="line">                <span class="number">2&#x27;b01</span>: m = m0 - m1;</span><br><span class="line">                <span class="number">2&#x27;b10</span>, <span class="number">2&#x27;b11</span>: ;</span><br><span class="line">            <span class="keyword">endcase</span></span><br><span class="line">            state &lt;= <span class="number">3&#x27;b001</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        NORMALIZE: <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(m[<span class="number">25</span>]==<span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                m = ~m + <span class="number">1</span>;</span><br><span class="line">                neg = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>(m[<span class="number">24</span>]==<span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">                m = m &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                exp = exp + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">while</span>(m[<span class="number">23</span>]==<span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                m = m &lt;&lt; <span class="number">1</span>;</span><br><span class="line">                exp = exp - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            state &lt;= <span class="number">3&#x27;b010</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        ROUND: <span class="keyword">begin</span></span><br><span class="line">            state &lt;= <span class="number">3&#x27;b011</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        OUTPUT : <span class="keyword">begin</span></span><br><span class="line">            result &lt;= &#123;neg, exp, m[<span class="number">22</span>:<span class="number">0</span>]&#125;;</span><br><span class="line">            fin &lt;= <span class="number">1</span>;</span><br><span class="line">            state &lt;= <span class="number">3&#x27;b100</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h2 id="实验结果与分析-3"><a href="#实验结果与分析-3" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h2><h3 id="一：乘法器-1"><a href="#一：乘法器-1" class="headerlink" title="一：乘法器"></a>一：乘法器</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> mul32_tb();</span><br><span class="line">    <span class="keyword">reg</span> clk;</span><br><span class="line">    <span class="keyword">reg</span> rst;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] multiplicand;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] multiplier;</span><br><span class="line">    <span class="keyword">reg</span> start;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">63</span>:<span class="number">0</span>] product;</span><br><span class="line">    <span class="keyword">wire</span> finish;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Test case array</span></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] test_case_multiplicand [<span class="number">0</span>:<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] test_case_multiplier [<span class="number">0</span>:<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">integer</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="comment">// Initialize test cases</span></span><br><span class="line">        test_case_multiplicand[<span class="number">0</span>] = <span class="number">32&#x27;hfffffffe</span>;</span><br><span class="line">        test_case_multiplier[<span class="number">0</span>] = <span class="number">32&#x27;d2</span>;</span><br><span class="line"></span><br><span class="line">        test_case_multiplicand[<span class="number">1</span>] = <span class="number">32&#x27;d5</span>;</span><br><span class="line">        test_case_multiplier[<span class="number">1</span>] = <span class="number">32&#x27;d7</span>;</span><br><span class="line"></span><br><span class="line">        test_case_multiplicand[<span class="number">2</span>] = <span class="number">32&#x27;d8</span>;</span><br><span class="line">        test_case_multiplier[<span class="number">2</span>] = <span class="number">32&#x27;d8</span>;</span><br><span class="line"></span><br><span class="line">        test_case_multiplicand[<span class="number">3</span>] = <span class="number">32&#x27;d50</span>;</span><br><span class="line">        test_case_multiplier[<span class="number">3</span>] = <span class="number">32&#x27;d6</span>;</span><br><span class="line"></span><br><span class="line">        test_case_multiplicand[<span class="number">4</span>] = <span class="number">32&#x27;d6</span>;</span><br><span class="line">        test_case_multiplier[<span class="number">4</span>] = <span class="number">32&#x27;d60</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Initial settings</span></span><br><span class="line">        clk = <span class="number">0</span>;</span><br><span class="line">        rst = <span class="number">0</span>;</span><br><span class="line">        multiplicand = <span class="number">0</span>;</span><br><span class="line">        multiplier = <span class="number">0</span>;</span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">50</span></span><br><span class="line">        rst = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Run test cases</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i = i + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">            start = <span class="number">1</span>;</span><br><span class="line">            multiplicand = test_case_multiplicand[i];</span><br><span class="line">            multiplier = test_case_multiplier[i];</span><br><span class="line">            #<span class="number">150</span></span><br><span class="line">            start = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// Wait for finish signal</span></span><br><span class="line">            <span class="keyword">while</span>(!finish) <span class="keyword">begin</span></span><br><span class="line">                #<span class="number">10</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            #<span class="number">150</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        #<span class="number">100</span> <span class="built_in">$finish</span>();</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span> #<span class="number">0</span><span class="variable">.5</span> clk = ~clk;</span><br><span class="line"></span><br><span class="line">    mul32 mul32_u(</span><br><span class="line">        clk, rst, multiplicand, multiplier, start, product, finish</span><br><span class="line">    );</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411061403716.png" alt="image-20230411061403716"><br>$$<br>-2*(-2)&#x3D;4\<br>5<em>7&#x3D;35\<br>8</em>8&#x3D;64\<br>50<em>6&#x3D;300\<br>6</em>60&#x3D;360<br>$$<br>符合有符号乘法器</p>
<h3 id="二：除法器-1"><a href="#二：除法器-1" class="headerlink" title="二：除法器"></a>二：除法器</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> div32_tb();</span><br><span class="line">    <span class="keyword">reg</span> clk;</span><br><span class="line">    <span class="keyword">reg</span> rst;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] dividend;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] divisor;</span><br><span class="line">    <span class="keyword">reg</span> start;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">wire</span> divide_zero;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] quotient;</span><br><span class="line">    <span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] remainder;</span><br><span class="line">    <span class="keyword">wire</span> finish;</span><br><span class="line"></span><br><span class="line">    div32 u_div(</span><br><span class="line">        <span class="variable">.clk</span>(clk),</span><br><span class="line">        <span class="variable">.rst</span>(rst),</span><br><span class="line">        <span class="variable">.dividend</span>(dividend),</span><br><span class="line">        <span class="variable">.divisor</span>(divisor),</span><br><span class="line">        <span class="variable">.start</span>(start),</span><br><span class="line">        <span class="variable">.quotient</span>(quotient),</span><br><span class="line">        <span class="variable">.remainder</span>(remainder),</span><br><span class="line">        <span class="variable">.finish</span>(finish),</span><br><span class="line">        <span class="variable">.divide_zero</span>(divide_zero)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span> #<span class="number">1</span> clk = ~clk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        clk = <span class="number">0</span>;</span><br><span class="line">        rst = <span class="number">1</span>;</span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        dividend = <span class="number">32&#x27;d0</span>;</span><br><span class="line">        divisor = <span class="number">32&#x27;d0</span>;</span><br><span class="line">        #<span class="number">10</span></span><br><span class="line">        rst = <span class="number">0</span>;</span><br><span class="line">        start = <span class="number">1</span>;</span><br><span class="line">        dividend = -<span class="number">2</span>;</span><br><span class="line">        divisor = <span class="number">1</span>;</span><br><span class="line">        #<span class="number">150</span></span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">50</span></span><br><span class="line">        start = <span class="number">1</span>;</span><br><span class="line">        dividend = <span class="number">32&#x27;d100</span>;</span><br><span class="line">        divisor = <span class="number">32&#x27;d10</span>;</span><br><span class="line">        #<span class="number">150</span></span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">50</span></span><br><span class="line">        start = <span class="number">1</span>;</span><br><span class="line">        dividend = <span class="number">9</span>;</span><br><span class="line">        divisor = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">150</span></span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">50</span></span><br><span class="line">        start = <span class="number">1</span>;</span><br><span class="line">        dividend = -<span class="number">100</span>;</span><br><span class="line">        divisor = -<span class="number">56</span>;</span><br><span class="line">        #<span class="number">350</span></span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        #<span class="number">350</span> <span class="built_in">$stop</span>();</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>!<strong><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411062147352.png" alt="image-20230411062147352"></strong><br>$$<br>-2&#x2F;1&#x3D;-2\<br>100&#x2F;10&#x3D;10\<br>9&#x2F;0时将finish和divide_zero置高\<br>-100&#x2F;-56&#x3D;1······-44<br>$$<br>符合有符号除法器，且实现了除零异常</p>
<h3 id="三：浮点加减法-1"><a href="#三：浮点加减法-1" class="headerlink" title="三：浮点加减法"></a>三：浮点加减法</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> float_add_32_tb;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inputs</span></span><br><span class="line"><span class="keyword">reg</span> clk;</span><br><span class="line"><span class="keyword">reg</span> rst;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] A;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] B;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] c;</span><br><span class="line"><span class="keyword">reg</span> en;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Outputs</span></span><br><span class="line"><span class="keyword">wire</span> [<span class="number">31</span>:<span class="number">0</span>] result;</span><br><span class="line"><span class="keyword">wire</span> fin;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Instantiate the Unit Under Test (UUT)</span></span><br><span class="line">float_add_32 add (</span><br><span class="line">    <span class="variable">.clk</span>(clk),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.A</span>(A),</span><br><span class="line">    <span class="variable">.B</span>(B),</span><br><span class="line">    <span class="variable">.c</span>(c),</span><br><span class="line">    <span class="variable">.en</span>(en),</span><br><span class="line">    <span class="variable">.result</span>(result),</span><br><span class="line">    <span class="variable">.fin</span>(fin)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> #<span class="number">5</span> clk = ~clk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    <span class="comment">// Initialize Inputs</span></span><br><span class="line">    clk = <span class="number">0</span>;</span><br><span class="line">    rst = <span class="number">1</span>;</span><br><span class="line">    A = <span class="number">32&#x27;hc0000000</span>;</span><br><span class="line">    B = <span class="number">32&#x27;hc0000000</span>;</span><br><span class="line">    c = <span class="number">2&#x27;b00</span>;</span><br><span class="line">    en = <span class="number">0</span>;</span><br><span class="line">    #<span class="number">20</span>;</span><br><span class="line">    rst = <span class="number">0</span>;</span><br><span class="line">    A = <span class="number">32&#x27;hc0a00002</span>; </span><br><span class="line">    B = <span class="number">32&#x27;hc0900000</span>; </span><br><span class="line">    c = <span class="number">2&#x27;b00</span>; </span><br><span class="line">    en = <span class="number">1</span>; </span><br><span class="line"></span><br><span class="line">    #<span class="number">180</span>;</span><br><span class="line">    A = <span class="number">32&#x27;h40a00000</span>; </span><br><span class="line">    B = <span class="number">32&#x27;h40900000</span>; </span><br><span class="line">    en = <span class="number">1</span>; </span><br><span class="line"></span><br><span class="line">    #<span class="number">180</span>;</span><br><span class="line">    #<span class="number">80</span>;</span><br><span class="line">    c=<span class="number">2&#x27;b01</span>;</span><br><span class="line">    A = <span class="number">32&#x27;h40a24800</span>; </span><br><span class="line">    B = <span class="number">32&#x27;h40d74523</span>; </span><br><span class="line">    en = <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    #<span class="number">180</span></span><br><span class="line">    A = <span class="number">32&#x27;h40a00000</span>; </span><br><span class="line">    B = <span class="number">32&#x27;h40900000</span>; </span><br><span class="line">    en = <span class="number">1</span>; </span><br><span class="line"></span><br><span class="line">    #<span class="number">180</span>;</span><br><span class="line">    en = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230411063742994.png" alt="image-20230411063742994"><br>$$<br>-5.0+(-4.5)&#x3D;-9.5\<br>5.0+4.5&#x3D;9.5\<br>5.1-6.7&#x3D;-1.6\<br>5.0-4.5&#x3D;0.5<br>$$</p>
<h2 id="讨论、心得-3"><a href="#讨论、心得-3" class="headerlink" title="讨论、心得"></a>讨论、心得</h2><p>浮点数的运算还是很有意思的，运算的顺序都能导致天差地别！说到底都是精度的锅！</p>
<h3 id="思考题-2"><a href="#思考题-2" class="headerlink" title="思考题"></a>思考题</h3><p>请结合理论课所学，回答以下问题：</p>
<ul>
<li><p>双精度浮点数</p>
<p><code>x,y,z</code>，若</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">x</span> = -<span class="number">1</span>.<span class="number">5</span>e38, y = <span class="number">1</span>.<span class="number">5</span>e38, z=<span class="number">1</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>(x+y)+z = ?</code>；</li>
<li><code>x+(y+z) = ?</code>；</li>
<li>两者有区别吗？请解释你的回答。</li>
</ul>
</li>
<li><p>假设使用单精度浮点数，编写以下代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> x = SOME_VALUE_0;</span><br><span class="line"><span class="built_in">float</span> <span class="built_in">sum</span> = 0.0f;</span><br><span class="line"><span class="keyword">for</span>(int i = 0; i &lt; SOME_VALUE_1; ++i) <span class="built_in">sum</span> += x;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>, <span class="built_in">sum</span> - 100.0f);</span><br></pre></td></tr></table></figure>

<ul>
<li>如果 <code>SOME_VALUE_0 := 0.1, SOME_VALUE_1 := 1000</code>，你将得到什么结果？</li>
<li>如果 <code>SOME_VALUE_0 := 0.125, SOME_VALUE_1 := 800</code>，你将得到什么结果？</li>
<li>请结合浮点数定义，解释两者差异。</li>
</ul>
</li>
</ul>
<ol>
<li>（1）  (x+y)+z &#x3D; 1.0</li>
</ol>
<p>首先计算 x+y，由于 x 和 y 的绝对值相等，但符号相反，因此它们相加得到 0。接下来将结果与 z 相加，得到：</p>
<p>(x+y)+z &#x3D; 0 + 1.0 &#x3D; 1.0</p>
<p>（2）x+(y+z) &#x3D; 0</p>
<p>首先计算 y+z，结果为：</p>
<p>y+z &#x3D; 1.5e38 + 1.0 ≈ 1.5e38</p>
<p>然后将 x 与这个结果相加，得到：</p>
<p>x+(y+z) &#x3D; -1.5e38 + 1.5e38 &#x3D; 0</p>
<p>（3）有区别，解释：</p>
<p>两个计算的结果是不同的。这是因为浮点数运算存在舍入误差。在第一个计算中，x 和 y 相加得到的结果正好为 0，因此不存在舍入误差。但在第二个计算中，y 和 z 相加时会发生舍入误差，由于 z 的数值远小于 y 的数值，z 在相加时对 y 几乎没有影响，因此 y+z 的结果仍接近 1.5e38。当 x 与该结果相加时，同样由于舍入误差，计算结果为 0 而不是 1。</p>
<ol start="2">
<li>（1） 若 <code>SOME_VALUE_0 := 0.1, SOME_VALUE_1 := 1000</code>：</li>
</ol>
<p>由于单精度浮点数不能精确表示 0.1，实际存储的值会有微小的差异。当将这个近似值加 1000 次后，累积的误差会放大。因此，最终的结果将不会精确地等于 100.0。假设结果接近 100.0。</p>
<p>（2） 若 <code>SOME_VALUE_0 := 0.125, SOME_VALUE_1 := 800</code>：</p>
<p>由于单精度浮点数可以精确表示 0.125（因为它是 2 的负整数次幂），计算过程中不会产生舍入误差。因此，最终的结果将精确地等于 100.0。</p>
<p>（3）解释两者差异：</p>
<p>这两个例子之间的差异在于浮点数表示的精确性。在第一个例子中，0.1 不能被单精度浮点数精确表示，因此计算过程中会产生舍入误差。而在第二个例子中，0.125 可以被单精度浮点数精确表示，因此计算过程中不会产生舍入误差。</p>
</center></center></center></center>
            </div>
            <!-- read more -->
            
                <div class="abstract-read-more-button">
                    <a href="/2023/06/07/Computer-composition-Vivado/">
                        <span style="margin-right: 0.2rem;">READ ARTICLE</span>
                        <i class="fas fa-angle-right"></i>
                    </a>
                </div>
            
            <div class="abstract-post-meta">
                <!-- date -->
                <div class="abstract-date" title="Last updated: 2024/04/07">
                    <span class="abstract-calander iconfont-archer">&#xe676;</span><span class="abstract-time">2023/06/07</span>
                </div>
                <!-- tags -->
                
            </div>
        </article>
        <div class="index-post-divider"></div>
    
    <!-- paginator  -->
    
</main>

                <!-- profile -->
                
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
    
        <div class="social">
            
    
        
            
                <a href="mailto:nointiiii@gmail.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/iiiinoint" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                    
                    <img class="profile-qr" src="/assets/qr.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    


        </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    
        <div class="website-approve">
            
            
        </div>
    
    <!-- 不蒜子  -->
    
        <div class="busuanzi-container">
            
             
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
            
        </div>
    	
</footer>

        </div>
        <!-- toc -->
        
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 13
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
        
            
            
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">01/27</span>
            <a class="archive-post-title" href="/2024/01/27/HTML%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/">HTML基本知识</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">01/26</span>
            <a class="archive-post-title" href="/2024/01/26/Swift%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Swift语言学习笔记</a>
        </li>
    
        
            
            
                
                </ul>
            
            <div class="archive-year"> 2023 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/05</span>
            <a class="archive-post-title" href="/2023/12/05/Introduction-to-Generative-Learning/">Introduction to Generative Learning</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/05</span>
            <a class="archive-post-title" href="/2023/12/05/Introduction-to-Deep-Learning/">Introduction to Deep Learning</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/03</span>
            <a class="archive-post-title" href="/2023/12/03/Classification/">Classification</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/02</span>
            <a class="archive-post-title" href="/2023/12/02/Gradient-Descent/">Gradient Descent</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/01</span>
            <a class="archive-post-title" href="/2023/12/01/Regression-Analysis/">Regression Analysis</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/01</span>
            <a class="archive-post-title" href="/2023/12/01/ChatGPT%E6%98%AF%E6%80%8E%E4%B9%88%E7%82%BC%E6%88%90%E7%9A%84/">ChatGPT是怎么炼成的</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span>
            <a class="archive-post-title" href="/2023/11/28/Introduction-to-Machine-Learning/">Introduction to Machine Learning</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">11/11</span>
            <a class="archive-post-title" href="/2023/11/11/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%88%86%E6%9E%90/">不同高级语言内存管理机制的汇编语言分析</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/17</span>
            <a class="archive-post-title" href="/2023/10/17/Hazards-in-Pipelined-CPU/">Hazards in Pipelined CPU</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/11</span>
            <a class="archive-post-title" href="/2023/10/11/hello-world/">Hello World</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/07</span>
            <a class="archive-post-title" href="/2023/06/07/Computer-composition-Vivado/">Computer composition_Vivado</a>
        </li>
    
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
        
            <span class="sidebar-tag-name" data-tags="Machine Learning">
                <span class="iconfont-archer">&#xe606;</span>
                Machine Learning
            </span>
        
            <span class="sidebar-tag-name" data-tags="Computer Science">
                <span class="iconfont-archer">&#xe606;</span>
                Computer Science
            </span>
        
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="Machine Learning">
            <span class="iconfont-archer">&#xe60a;</span>
            Machine Learning
        </span>
    
        <span class="sidebar-category-name" data-categories="Computer Science">
            <span class="iconfont-archer">&#xe60a;</span>
            Computer Science
        </span>
    
        <span class="sidebar-category-name" data-categories="Computer Organization and Design">
            <span class="iconfont-archer">&#xe60a;</span>
            Computer Organization and Design
        </span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "http://noint.top",
        root: siteMetaRoot,
        author: "Noint"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->


        <!-- main func -->
        <script src="/scripts/main.js?v=20211217"></script>
        <!-- dark mode -->
        <script src="/scripts/dark.js?v=20211217"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>
        <!-- algolia -->
        
        <!-- busuanzi -->
        
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        
        <!-- CNZZ -->
        
        <!-- async load share.js -->
        
        <!-- mermaid -->
        
    </body>
</html>
